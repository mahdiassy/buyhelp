import{Da as x,a as n,k as w,m as p,n as v,p as d}from"./chunk-AYDE6MWJ.js";import{$ as R,V as c,a as h,b as m,ca as u,n as s,xc as y}from"./chunk-RFGELG3T.js";var f=(()=>{let e=class e{constructor(t){this.payload=t}};e.type="[Role] Get";let r=e;return r})(),$=(()=>{let e=class e{constructor(){}};e.type="[Role] Module Get";let r=e;return r})(),U=(()=>{let e=class e{constructor(t){this.payload=t}};e.type="[Role] Create";let r=e;return r})(),j=(()=>{let e=class e{constructor(t){this.id=t}};e.type="[Role] Edit";let r=e;return r})(),E=(()=>{let e=class e{constructor(t,l){this.payload=t,this.id=l}};e.type="[Role] Update";let r=e;return r})(),b=(()=>{let e=class e{constructor(t){this.id=t}};e.type="[Role] Delete";let r=e;return r})(),A=(()=>{let e=class e{constructor(t){this.ids=t}};e.type="[Role] Delete All";let r=e;return r})();var L=(()=>{let e=class e{constructor(t){this.http=t}getRoleModules(){return this.http.get(`${n.URL}/module`)}getRoles(t){return this.http.get(`${n.URL}/role`,{params:t})}createRole(t){return this.http.post(`${n.URL}/role`,t)}editRole(t){return this.http.get(`${n.URL}/role/${t}`)}updateRole(t,l){return this.http.put(`${n.URL}/role/${t}`,l)}deleteRole(t){return this.http.delete(`${n.URL}/role/${t}`)}deleteAllRole(t){return this.http.post(`${n.URL}/role/deleteAll`,{ids:t})}};e.\u0275fac=function(l){return new(l||e)(u(y))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var a,i=(a=class{constructor(e,o,t){this.store=e,this.notificationService=o,this.roleService=t}static role(e){return e.role}static roles(e){return e.role.data.map(o=>({label:o?.name,value:o?.id})).filter(o=>o.label!=="admin"&&o.label!=="vendor")}static selectedRole(e){return e.selectedRole}static roleModules(e){return e.modules}getRoles(e,o){return this.roleService.getRoles(o?.payload).pipe(c({next:t=>{e.patchState({role:{data:t.data,total:t?.total?t?.total:t.data.length}})},error:t=>{throw new Error(t?.error?.message)}}))}getRoleModules(e){return this.roleService.getRoleModules().pipe(c({next:o=>{let t=e.getState();e.patchState(m(h({},t),{modules:o}))},error:o=>{throw new Error(o?.error?.message)}}))}create(e,o){return this.roleService.createRole(o.payload).pipe(c({next:t=>{let l=e.getState();e.patchState({role:{data:[...l.role.data,t],total:l?.role.total+1}})},complete:()=>{this.notificationService.showSuccess("Role Created Successfully")},error:t=>{throw new Error(t?.error?.message)}}))}edit(e,{id:o}){return this.roleService.editRole(o).pipe(c({next:t=>{let l=e.getState();e.patchState(m(h({},l),{selectedRole:t}))},error:t=>{throw new Error(t?.error?.message)}}))}update(e,{payload:o,id:t}){return this.roleService.updateRole(t,o).pipe(c({next:l=>{let S=e.getState(),g=[...S.role.data],I=g.findIndex(M=>M.id==t);g[I]=l,e.patchState(m(h({},S),{role:{data:g,total:S.role.total-1}}))},complete:()=>{this.notificationService.showSuccess("Role Updated Successfully")},error:l=>{throw new Error(l?.error?.message)}}))}delete(e,{id:o}){return this.roleService.deleteRole(o).pipe(c({next:()=>{this.store.dispatch(new f({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Role Deleted Successfully")},error:t=>{throw new Error(t?.error?.message)}}))}deleteAll(e,{ids:o}){return this.roleService.deleteAllRole(o).pipe(c({next:()=>{this.store.dispatch(new f({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Role Deleted Successfully")},error:t=>{throw new Error(t?.error?.message)}}))}},a.\u0275fac=function(o){return new(o||a)(u(w),u(x),u(L))},a.\u0275prov=R({token:a,factory:a.\u0275fac}),a);s([p(f)],i.prototype,"getRoles",null);s([p($)],i.prototype,"getRoleModules",null);s([p(U)],i.prototype,"create",null);s([p(j)],i.prototype,"edit",null);s([p(E)],i.prototype,"update",null);s([p(b)],i.prototype,"delete",null);s([p(A)],i.prototype,"deleteAll",null);s([d()],i,"role",null);s([d()],i,"roles",null);s([d()],i,"selectedRole",null);s([d()],i,"roleModules",null);i=s([v({name:"role",defaults:{role:{data:[],total:0},selectedRole:null,modules:[]}})],i);export{f as a,$ as b,U as c,j as d,E as e,b as f,A as g,i as h};

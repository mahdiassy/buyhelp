import{a as z}from"./chunk-YK6OOJHV.js";import{Ec as W,ab as B,k as Q,lb as F,ob as q,sb as R,wb as G,xb as H}from"./chunk-AYDE6MWJ.js";import{Ea as m,Fa as k,Nb as V,Ob as b,Oc as T,Qa as M,Rc as N,Sa as d,aa as g,ab as r,bb as s,cb as C,ga as S,gb as v,ha as h,jb as u,jc as E,kb as _,oa as p,pa as c,rb as x,sb as y,tb as I,tc as j,vb as w,xb as P,yb as A}from"./chunk-RFGELG3T.js";var O=["mediaModal"],U=["deleteModal"];function X(t,e){if(t&1){let o=v();r(0,"ul")(1,"li"),w(2),V(3,"translate"),s(),r(4,"li")(5,"a",11),u("click",function(){p(o);let i=_(2);return c(i.DeleteModal.openModal("deleteAll",[]))}),C(6,"i",12),s()()()}if(t&2){let o=_(2);m(2),A("",b(3,2,"selected"),"(",o.images.length?o.images.length:0,")")}}function Y(t,e){if(t&1&&(r(0,"div",9),M(1,X,7,4,"ul",10),s()),t&2){let o=_();m(),d("ngIf",o.images==null?null:o.images.length)}}function Z(t,e){if(t&1){let o=v();r(0,"a",13),u("click",function(){p(o);let i=_();return c(i.MediaModal.openModal())}),C(1,"i",14),w(2),V(3,"translate"),s()}t&2&&(m(2),P(" ",b(3,1,"add_media")," "))}var K=(()=>{let e=class e{constructor(n){this.store=n,this.images=[]}selectImage(n){this.images=n}onActionClicked(n){if(n=="deleteAll"){let i=this.images.map(a=>a?.id);this.store.dispatch(new R(i)).subscribe({complete:()=>{this.images=[]}})}}deleteImage(n){this.images=this.images.filter(i=>i.id!==n)}};e.\u0275fac=function(i){return new(i||e)(k(Q))},e.\u0275cmp=S({type:e,selectors:[["app-media"]],viewQuery:function(i,a){if(i&1&&(x(O,5),x(U,5)),i&2){let l;y(l=I())&&(a.MediaModal=l.first),y(l=I())&&(a.DeleteModal=l.first)}},decls:9,vars:8,consts:[["mediaModal",""],["deleteModal",""],[3,"gridClass","title"],["option","","class","selected-options",4,"hasPermission"],["button",""],["class","align-items-center btn btn-theme d-flex",3,"click",4,"hasPermission"],[3,"setDeleteImage","setImage","loading","selectedImages","multiple"],[3,"selectMedia"],[3,"deleteItem"],["option","",1,"selected-options"],[4,"ngIf"],["href","javascript:void(0)",3,"click"],[1,"ri-delete-bin-line"],[1,"align-items-center","btn","btn-theme","d-flex",3,"click"],[1,"ri-add-line"]],template:function(i,a){if(i&1){let l=v();r(0,"app-page-wrapper",2),M(1,Y,2,1,"div",3),r(2,"div",4),M(3,Z,4,3,"a",5),s(),r(4,"app-media-box",6),u("setDeleteImage",function(f){return p(l),c(a.deleteImage(f))})("setImage",function(f){return p(l),c(a.selectImage(f))}),s()(),C(5,"app-media-modal",7,0),r(7,"app-delete-modal",8,1),u("deleteItem",function(f){return p(l),c(a.onActionClicked(f.actionToPerform))}),s()}i&2&&(d("gridClass","col-12")("title","media_library"),m(),d("hasPermission","attachment.destroy"),m(2),d("hasPermission","attachment.create"),m(),d("loading",!1)("selectedImages",a.images)("multiple",!0),m(),d("selectMedia",!1))},dependencies:[E,F,G,q,H,B,N]});let t=e;return t})();var $=[{path:"",component:K,canActivate:[z],data:{permission:"attachment.index"}}],L=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=h({type:e}),e.\u0275inj=g({imports:[T.forChild($),T]});let t=e;return t})();var Ce=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=h({type:e}),e.\u0275inj=g({imports:[j,L,W]});let t=e;return t})();export{Ce as MediaModule};

import{Da as $,a as n,k as v,m as p,n as x,p as f}from"./chunk-AYDE6MWJ.js";import{$ as S,V as c,a as h,b,ca as d,n as s,xc as w}from"./chunk-RFGELG3T.js";var m=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Blog] Get";let o=t;return o})(),U=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Blog] Create";let o=t;return o})(),j=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Blog] Edit";let o=t;return o})(),E=(()=>{let t=class t{constructor(e,r){this.payload=e,this.id=r}};t.type="[Blog] Update";let o=t;return o})(),A=(()=>{let t=class t{constructor(e,r){this.id=e,this.status=r}};t.type="[Blog] Update Status";let o=t;return o})(),I=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Blog] Delete";let o=t;return o})(),L=(()=>{let t=class t{constructor(e){this.ids=e}};t.type="[Blog] Delete All";let o=t;return o})();var R=(()=>{let t=class t{constructor(e){this.http=e}getBlogs(e){return this.http.get(`${n.URL}/blog`,{params:e})}createBlog(e){return this.http.post(`${n.URL}/blog`,e)}editBlog(e){return this.http.get(`${n.URL}/blog/${e}`)}updateBlog(e,r){return this.http.put(`${n.URL}/blog/${e}`,r)}updateBlogStatus(e,r){return this.http.put(`${n.URL}/blog/${e}/${r}`,{})}deleteBlog(e){return this.http.delete(`${n.URL}/blog/${e}`)}deleteAllBlog(e){return this.http.post(`${n.URL}/blog/deleteAll`,{ids:e})}};t.\u0275fac=function(r){return new(r||t)(d(w))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var a,i=(a=class{constructor(t,l,e){this.store=t,this.notificationService=l,this.blogService=e}static blog(t){return t.blog}static blogs(t){return t.blog.data.map(l=>({label:l?.title,value:l?.id}))}static selectedBlog(t){return t.selectedBlog}getBlogs(t,l){return this.blogService.getBlogs(l.payload).pipe(c({next:e=>{t.patchState({blog:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}create(t,l){return this.blogService.createBlog(l.payload).pipe(c({next:e=>{let r=t.getState();t.patchState(b(h({},r),{blog:{data:[...r.blog.data,e],total:r?.blog.total+1}}))},complete:()=>{this.notificationService.showSuccess("Blog Created Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}edit(t,{id:l}){return this.blogService.editBlog(l).pipe(c({next:e=>{let r=t.getState();t.patchState(b(h({},r),{selectedBlog:e}))},error:e=>{throw new Error(e?.error?.message)}}))}update(t,{payload:l,id:e}){return this.blogService.updateBlog(e,l).pipe(c({next:r=>{if(typeof r=="object"){let g=t.getState(),u=[...g.blog.data],B=u.findIndex(y=>y.id===e);u[B]=r,t.patchState(b(h({},g),{blog:{data:u,total:g.blog.total}}))}},complete:()=>{this.notificationService.showSuccess("Blog Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}updateStatus(t,{id:l,status:e}){return this.blogService.updateBlogStatus(l,e).pipe(c({next:r=>{if(typeof r=="object"){let g=t.getState(),u=[...g.blog.data],B=u.findIndex(y=>y.id===l);u[B]=r,t.patchState(b(h({},g),{blog:{data:u,total:g.blog.total}}))}},complete:()=>{this.notificationService.showSuccess("Blog Status Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}delete(t,{id:l}){return this.blogService.deleteBlog(l).pipe(c({next:()=>{this.store.dispatch(new m({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Blog Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}deleteAll(t,{ids:l}){return this.blogService.deleteAllBlog(l).pipe(c({next:()=>{this.store.dispatch(new m({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Blog Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}},a.\u0275fac=function(l){return new(l||a)(d(v),d($),d(R))},a.\u0275prov=S({token:a,factory:a.\u0275fac}),a);s([p(m)],i.prototype,"getBlogs",null);s([p(U)],i.prototype,"create",null);s([p(j)],i.prototype,"edit",null);s([p(E)],i.prototype,"update",null);s([p(A)],i.prototype,"updateStatus",null);s([p(I)],i.prototype,"delete",null);s([p(L)],i.prototype,"deleteAll",null);s([f()],i,"blog",null);s([f()],i,"blogs",null);s([f()],i,"selectedBlog",null);i=s([x({name:"blog",defaults:{blog:{data:[],total:0},selectedBlog:null}})],i);export{m as a,U as b,j as c,E as d,A as e,I as f,L as g,i as h};

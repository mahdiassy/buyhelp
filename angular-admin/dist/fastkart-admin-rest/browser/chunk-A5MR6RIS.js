import{Da as U,a as p,k as g,m as l,n as v,p as B}from"./chunk-AYDE6MWJ.js";import{$ as S,V as d,a as b,b as m,ca as h,n as o,xc as x}from"./chunk-RFGELG3T.js";var f=(()=>{let e=class e{constructor(t){this.payload=t}};e.type="[Brand] Get";let r=e;return r})(),$=(()=>{let e=class e{constructor(t){this.payload=t}};e.type="[Brand] Create";let r=e;return r})(),E=(()=>{let e=class e{constructor(t){this.id=t}};e.type="[Brand] Edit";let r=e;return r})(),L=(()=>{let e=class e{constructor(t,a){this.payload=t,this.id=a}};e.type="[Brand] Update";let r=e;return r})(),R=(()=>{let e=class e{constructor(t,a){this.id=t,this.status=a}};e.type="[Brand] Update Status";let r=e;return r})(),j=(()=>{let e=class e{constructor(t){this.id=t}};e.type="[Brand] Delete";let r=e;return r})(),A=(()=>{let e=class e{constructor(t){this.ids=t}};e.type="[Brand] Delete All";let r=e;return r})(),I=(()=>{let e=class e{constructor(t){this.payload=t}};e.type="[Brand] Import";let r=e;return r})(),k=(()=>{let e=class e{};e.type="[Brand] Export";let r=e;return r})();var D=(()=>{let e=class e{constructor(t){this.http=t}getBrands(t){return this.http.get(`${p.URL}/brand`,{params:t})}createBrand(t){return this.http.post(`${p.URL}/brand`,t)}editBrand(t){return this.http.get(`${p.URL}/brand/${t}`)}updateBrand(t,a){return this.http.put(`${p.URL}/brand/${t}`,a)}updateBrandStatus(t,a){return this.http.put(`${p.URL}/brand/${t}/${a}`,{})}deleteBrand(t){return this.http.delete(`${p.URL}/brand/${t}`)}deleteAllBrand(t){return this.http.post(`${p.URL}/brand/deleteAll`,{ids:t})}importBrand(t){let a=new FormData;return Array.isArray(t)&&t.length&&t.forEach((i,c)=>{a.append("brands",i,i.name)}),this.http.post(`${p.URL}/brand/csv/import`,a)}exportBrand(){let t={};return this.http.post(`${p.URL}/brand/csv/export`,t,{responseType:"blob"})}};e.\u0275fac=function(a){return new(a||e)(h(x))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var u,s=(u=class{constructor(e,n,t){this.store=e,this.notificationService=n,this.brandService=t}static brand(e){return e.brand}static selectedBrand(e){return e.selectedBrand}static brands(e){return e.brand.data.map(n=>({label:n?.name,value:n?.id}))}getBrands(e,n){return this.brandService.getBrands(n.payload).pipe(d({next:t=>{e.patchState({brand:{data:t.data,total:t?.total?t?.total:t.data?.length}})},error:t=>{throw new Error(t?.error?.message)}}))}create(e,n){return this.brandService.createBrand(n.payload).pipe(d({next:t=>{let a=e.getState();e.patchState(m(b({},a),{brand:{data:[...a.brand.data,t],total:a?.brand.total+1}}))},complete:()=>{this.notificationService.showSuccess("Brand Created Successfully")},error:t=>{throw new Error(t?.error?.message)}}))}edit(e,{id:n}){return this.brandService.editBrand(n).pipe(d({next:t=>{let a=e.getState();e.patchState(m(b({},a),{selectedBrand:t}))},error:t=>{throw new Error(t?.error?.message)}}))}update(e,{payload:n,id:t}){return this.brandService.updateBrand(t,n).pipe(d({next:a=>{if(typeof a=="object"){let i=e.getState(),c=[...i.brand.data],y=c.findIndex(w=>w.id===t);c[y]=a,e.patchState(m(b({},i),{brand:{data:c,total:i.brand.total}}))}},complete:()=>{this.notificationService.showSuccess("Brand Updated Successfully")},error:a=>{throw new Error(a?.error?.message)}}))}updateStatus(e,{id:n,status:t}){return this.brandService.updateBrandStatus(n,t).pipe(d({next:a=>{if(typeof a=="object"){let i=e.getState(),c=[...i.brand.data],y=c.findIndex(w=>w.id===n);c[y]=a,e.patchState(m(b({},i),{brand:{data:c,total:i.brand.total}}))}},complete:()=>{this.notificationService.showSuccess("Brand Status Updated Successfully")},error:a=>{throw new Error(a?.error?.message)}}))}delete(e,{id:n}){return this.brandService.deleteBrand(n).pipe(d({next:()=>{this.store.dispatch(new f({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Brans Deleted Successfully")},error:t=>{throw new Error(t?.error?.message)}}))}deleteAll(e,{ids:n}){return this.brandService.deleteAllBrand(n).pipe(d({next:()=>{this.store.dispatch(new f({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Brand Deleted Successfully")},error:t=>{throw new Error(t?.error?.message)}}))}import(e,n){return this.brandService.importBrand(n.payload).pipe(d({next:t=>{this.store.dispatch(new f({page:1,paginate:15}))},error:t=>{throw new Error(t?.error?.message)}}))}export(e,n){return this.brandService.exportBrand().pipe(d({next:t=>{let a=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(a),c=document.createElement("a");c.href=i,c.download="brand.csv",c.click(),window.URL.revokeObjectURL(i)},error:t=>{throw new Error(t?.error?.message)}}))}},u.\u0275fac=function(n){return new(n||u)(h(g),h(U),h(D))},u.\u0275prov=S({token:u,factory:u.\u0275fac}),u);o([l(f)],s.prototype,"getBrands",null);o([l($)],s.prototype,"create",null);o([l(E)],s.prototype,"edit",null);o([l(L)],s.prototype,"update",null);o([l(R)],s.prototype,"updateStatus",null);o([l(j)],s.prototype,"delete",null);o([l(A)],s.prototype,"deleteAll",null);o([l(I)],s.prototype,"import",null);o([l(k)],s.prototype,"export",null);o([B()],s,"brand",null);o([B()],s,"selectedBrand",null);o([B()],s,"brands",null);s=o([v({name:"brand",defaults:{brand:{data:[],total:0},selectedBrand:null}})],s);export{f as a,$ as b,E as c,L as d,R as e,j as f,A as g,s as h};

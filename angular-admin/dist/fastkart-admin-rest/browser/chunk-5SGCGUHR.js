import{a as Pe,b as Se,c as Me,d as Fe,e as Te,f as ke,g as Ee,h as C}from"./chunk-46CPMU37.js";import{a as ye,b as ve,c as be,d as we}from"./chunk-YJBHC5EX.js";import{a as j}from"./chunk-YK6OOJHV.js";import{A as oe,B as re,E as g,Ec as _e,F as ne,G as ae,J as pe,K as le,N as me,Oa as de,S as se,Ua as ce,ab as fe,k as D,l as Z,lb as v,o as T,qb as ue,rb as ge,tb as he,x as ee,y as te,yb as Ce,z as ie}from"./chunk-AYDE6MWJ.js";import{Cb as q,Db as V,Ea as i,Eb as W,Fa as u,Hb as A,Ib as H,Jc as X,Lc as N,Mc as Y,Nb as d,Ob as c,Oc as $,Qa as x,Rc as B,S as L,Sa as o,T as R,aa as E,ab as n,bb as l,cb as m,ga as f,ha as I,hc as z,i as G,jb as h,jc as J,mc as K,n as S,nb as M,p as O,tc as Q,u as U,vb as y,xb as F}from"./chunk-RFGELG3T.js";var Ve=()=>["/page/create"];function We(a,e){a&1&&(n(0,"div",3)(1,"a",4),m(2,"i",5),y(3),d(4,"translate"),l()()),a&2&&(i(),o("routerLink",A(4,Ve)),i(2),F(" ",c(4,2,"add_page")," "))}var b=class b{constructor(e,s){this.store=e,this.router=s,this.tableConfig={columns:[{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"page.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"page.destroy"},{label:"View",actionToPerform:"view",icon:"ri-eye-line"}],data:[],total:0},this.setting$.subscribe(t=>{this.url=t.general.site_url})}ngOnInit(){this.page$.subscribe(e=>{this.tableConfig.data=e?e?.data:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new Pe(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="status"?this.status(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"?this.deleteAll(e.data):e.actionToPerform=="view"&&this.view(e.data)}edit(e){this.router.navigateByUrl(`/page/edit/${e.id}`)}status(e){this.store.dispatch(new Te(e.id,e.status))}delete(e){this.store.dispatch(new ke(e.id))}deleteAll(e){this.store.dispatch(new Ee(e))}view(e){window.open(this.url+"/page/"+e.slug,"_blank")}};b.\u0275fac=function(s){return new(s||b)(u(D),u(N))},b.\u0275cmp=f({type:b,selectors:[["app-page"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(s,t){s&1&&(n(0,"app-page-wrapper",0),x(1,We,5,5,"div",1),n(2,"app-table",2),h("tableChanged",function(p){return t.onTableChange(p)})("rowClicked",function(p){return t.edit(p)})("action",function(p){return t.onActionClicked(p)}),l()()),s&2&&(o("gridClass","col-sm-12")("title","pages"),i(),o("hasPermission","page.create"),i(),o("tableConfig",t.tableConfig)("hasCheckbox",!0))},dependencies:[Y,ue,v,fe,B]});var w=b;S([T(C.page)],w.prototype,"page$",void 0);S([T(de.setting)],w.prototype,"setting$",void 0);var $e=()=>({standalone:!0}),Ge=a=>[a];function Oe(a,e){a&1&&(n(0,"div",26),y(1),d(2,"translate"),l()),a&2&&(i(),F(" ",c(2,1,"title_is_required")," "))}var P=class P{constructor(e,s,t,r){this.store=e,this.route=s,this.router=t,this.formBuilder=r,this.destroy$=new G,this.html="",this.mediaConfig=he,this.isCodeEditor=!0,this.textArea=new g(""),this.form=this.formBuilder.group({title:new g("",[ie.required]),content:new g,meta_title:new g,meta_description:new g,page_meta_image_id:new g,status:new g(1)})}ngOnInit(){this.route.params.pipe(L(e=>e.id?this.store.dispatch(new Me(e.id)).pipe(U(()=>this.store.select(C.selectedPage))):O()),R(this.destroy$)).subscribe(e=>{this.id=e?.id,this.form.patchValue({title:e?.title,content:e?.content,meta_title:e?.meta_title,meta_description:e?.meta_description,status:e?.status})}),this.editor=new we}selectMetaImage(e){Array.isArray(e)||this.form.controls.page_meta_image_id.setValue(e?e.id:null)}getText(e){this.form.controls.content.setValue(this.textArea.value)}getData(e){this.textArea.setValue(this.html)}submit(){this.form.markAllAsTouched();let e=new Se(this.form.value);this.type=="edit"&&this.id&&(e=new Fe(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/page")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};P.\u0275fac=function(s){return new(s||P)(u(D),u(X),u(N),u(se))},P.\u0275cmp=f({type:P,selectors:[["app-form-page"]],inputs:{type:"type"},decls:39,vars:53,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],[1,"custom-editor","editor-checkbox"],[1,"form-check","form-switch"],["id","ckcheck","type","checkbox","name","isCodeEditor",1,"form-check-input",3,"ngModelChange","ngModel","ngModelOptions"],["for","ckcheck",1,"cursor-pointer"],[1,"edit"],[1,"ri-edit-box-line"],[1,"code"],[1,"ri-code-s-slash-line"],[3,"ngClass"],[3,"editor"],["formControlName","content",3,"ngModelChange","editor","placeholder","ngModel"],[1,"editor-textarea",3,"ngClass"],["id","content","rows","3",1,"form-control",3,"keyup","placeholder","formControl"],[1,"mt-2"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"selectedFiles","accept","multipleImage","image"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"]],template:function(s,t){if(s&1&&(n(0,"form",0),h("ngSubmit",function(){return t.submit()}),n(1,"app-form-fields",1),m(2,"input",2),d(3,"translate"),x(4,Oe,3,3,"div",3),l(),n(5,"app-form-fields",1)(6,"div",4)(7,"div",5)(8,"input",6),W("ngModelChange",function(p){return V(t.isCodeEditor,p)||(t.isCodeEditor=p),p}),l(),n(9,"label",7)(10,"span",8),m(11,"i",9),l(),n(12,"span",10),m(13,"i",11),l()()(),n(14,"div",12),m(15,"ngx-editor-menu",13),n(16,"ngx-editor",14),W("ngModelChange",function(p){return V(t.html,p)||(t.html=p),p}),h("ngModelChange",function(p){return t.getData(p)}),l()(),n(17,"div",15)(18,"textarea",16),d(19,"translate"),h("keyup",function(p){return t.getText(p)}),l(),n(20,"p",17),y(21,"*Only accept html tags"),l()()()(),n(22,"app-form-fields",1),m(23,"input",18),d(24,"translate"),l(),n(25,"app-form-fields",1),m(26,"textarea",19),d(27,"translate"),l(),n(28,"app-form-fields",1)(29,"app-image-upload",20),d(30,"async"),h("selectedFiles",function(p){return t.selectMetaImage(p)}),l()(),n(31,"app-form-fields",1)(32,"div",21)(33,"label",22),m(34,"input",23)(35,"span",24),l()()(),n(36,"app-button",25),y(37),d(38,"translate"),l()()),s&2){let r;o("formGroup",t.form),i(),o("label","title")("for","title")("required",!0),i(),M("placeholder",c(3,38,"enter_title")),i(2),o("ngIf",t.form.controls.title.touched&&(t.form.controls.title.errors==null?null:t.form.controls.title.errors.required)),i(),o("label","content")("for","content")("required",!1),i(3),q("ngModel",t.isCodeEditor),o("ngModelOptions",A(50,$e)),i(6),o("ngClass",t.isCodeEditor?"d-block":"d-none"),i(),o("editor",t.editor),i(),o("editor",t.editor)("placeholder","Type here..."),q("ngModel",t.html),i(),o("ngClass",t.isCodeEditor?"d-none":"d-block"),i(),M("placeholder",c(19,40,"enter_html_content")),o("formControl",t.textArea),i(4),o("label","meta_title")("for","metatitle")("required",!1),i(),M("placeholder",c(24,42,"enter_meta_title")),i(2),o("label","meta_description")("for","desc")("required",!1),i(),M("placeholder",c(27,44,"enter_meta_description")),i(2),o("label","meta_image")("for","meta_image")("required",!1),i(),o("accept",H(51,Ge,t.mediaConfig.image))("multipleImage",!1)("image",(r=c(30,46,t.page$))==null?null:r.page_meta_image),i(2),o("label","Status")("for","status")("required",!1),i(5),o("id","page_btn"),i(),F(" ",c(38,48,t.type=="create"?"save_page":"update_page")," ")}},dependencies:[z,J,ae,te,ee,oe,re,pe,le,me,ne,ge,Ce,ce,ye,ve,K,B]});var _=P;S([T(C.selectedPage)],_.prototype,"page$",void 0);var Ae=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=f({type:e,selectors:[["app-create-page"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(r,p){r&1&&(n(0,"app-page-wrapper",0),m(1,"app-form-page",1),l()),r&2&&(o("title","create_page"),i(),o("type","create"))},dependencies:[v,_]});let a=e;return a})();var Ne=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=f({type:e,selectors:[["app-edit-page"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(r,p){r&1&&(n(0,"app-page-wrapper",0),m(1,"app-form-page",1),l()),r&2&&(o("title","update_page"),i(),o("type","edit"))},dependencies:[v,_]});let a=e;return a})();var Ue=[{path:"",component:w,canActivate:[j],data:{permission:"page.index"}},{path:"create",component:Ae,canActivate:[j],data:{permission:["page.index","page.create"]}},{path:"edit/:id",component:Ne,canActivate:[j],data:{permission:["page.index","page.edit"]}}],De=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=I({type:e}),e.\u0275inj=E({imports:[$.forChild(Ue),$]});let a=e;return a})();var Bt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=I({type:e}),e.\u0275inj=E({imports:[Q,De,_e,Z.forFeature([C]),be]});let a=e;return a})();export{Bt as PageModule};

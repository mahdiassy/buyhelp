import{a as I}from"./chunk-YOJNFG2N.js";import{a as G}from"./chunk-YK6OOJHV.js";import{A as pe,Ac as Fe,B as se,Bc as Te,E as A,Ec as ke,G as me,K as de,L as ce,M as ue,N as fe,S as ve,Ua as he,ab as _e,fb as be,k as P,l as ne,lb as S,o as ae,qb as Ce,rb as ge,rc as ye,tc as xe,uc as we,vc as Ae,xc as Se,y as le,yc as Ie,z as x}from"./chunk-AYDE6MWJ.js";import{Ea as o,Fa as C,Hb as q,Jc as re,Lc as D,Mc as oe,Nb as m,Ob as d,Oc as O,Qa as w,Rc as j,S as H,Sa as a,T as z,Wa as $,aa as E,ab as l,bb as s,cb as c,db as J,eb as K,ga as h,gb as T,ha as N,i as Q,ic as ee,jb as g,jc as te,kb as y,n as U,nb as k,oa as _,p as L,pa as b,rb as X,sb as Y,tb as Z,tc as ie,u as W,vb as u,wb as V,xb as v}from"./chunk-RFGELG3T.js";var Ge=["csvModal"],Re=()=>["/attribute/create"];function $e(r,e){if(r&1){let p=T();l(0,"div",5)(1,"a",6),g("click",function(){_(p);let i=y();return b(i.CSVModal.openModal())}),c(2,"i",7),u(3),m(4,"translate"),s(),l(5,"a",6),g("click",function(){_(p);let i=y();return b(i.export())}),c(6,"i",8),u(7),m(8,"translate"),s(),l(9,"a",9),c(10,"i",10),u(11),m(12,"translate"),s()()}r&2&&(o(3),v(" ",d(4,4,"import")," "),o(4),v(" ",d(8,6,"export")," "),o(2),a("routerLink",q(10,Re)),o(2),v(" ",d(12,8,"add_attribute")," "))}var F=class F{constructor(e,p){this.store=e,this.router=p,this.tableConfig={columns:[{title:"name",dataField:"name",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"attribute.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"attribute.destroy"}],data:[],total:0}}ngOnInit(){this.attribute$.subscribe(e=>{this.tableConfig.data=e?e?.data:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new ye(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"&&this.deleteAll(e.data)}edit(e){this.router.navigateByUrl(`/attribute/edit/${e.id}`)}delete(e){this.store.dispatch(new Se(e.id))}deleteAll(e){this.store.dispatch(new Ie(e))}export(){this.store.dispatch(new Fe)}};F.\u0275fac=function(p){return new(p||F)(C(P),C(D))},F.\u0275cmp=h({type:F,selectors:[["app-attribute"]],viewQuery:function(p,t){if(p&1&&X(Ge,5),p&2){let i;Y(i=Z())&&(t.CSVModal=i.first)}},decls:5,vars:6,consts:[["csvModal",""],[3,"gridClass","title"],["class","d-flex flex-wrap gap-2","button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],[3,"module"],["button","",1,"d-flex","flex-wrap","gap-2"],["href","javascript:void(0)",1,"align-items-center","btn","btn-outline","me-2",3,"click"],[1,"ri-upload-2-line"],[1,"ri-download-2-line"],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(p,t){if(p&1){let i=T();l(0,"app-page-wrapper",1),w(1,$e,13,11,"div",2),l(2,"app-table",3),g("tableChanged",function(f){return _(i),b(t.onTableChange(f))})("rowClicked",function(f){return _(i),b(t.edit(f))})("action",function(f){return _(i),b(t.onActionClicked(f))}),s()(),c(3,"app-import-csv-modal",4,0)}p&2&&(a("gridClass","col-sm-12")("title","attribute"),o(),a("hasPermission","attribute.create"),o(),a("tableConfig",t.tableConfig)("hasCheckbox",!0),o(),a("module","attribute"))},dependencies:[oe,Ce,S,Te,_e,j]});var B=F;U([ae(I.attribute)],B.prototype,"attribute$",void 0);var Oe=()=>[];function Qe(r,e){r&1&&(l(0,"div",13),u(1),m(2,"translate"),s()),r&2&&(o(),v(" ",d(2,1,"attribute_name_is_required")," "))}function Ue(r,e){r&1&&(l(0,"div",13),u(1),m(2,"translate"),s()),r&2&&(o(),v(" ",d(2,1,"value_is_required")," "))}function Le(r,e){if(r&1&&(l(0,"div",19)(1,"div",20),c(2,"input",21),l(3,"h6"),u(4),s()()()),r&2){let p,t=y().$implicit;o(4),V((p=t.get("hex_color"))==null?null:p.value)}}function We(r,e){if(r&1){let p=T();l(0,"div",22)(1,"a",23),g("click",function(){_(p);let i=y().index,n=y();return b(n.remove(i))}),u(2),m(3,"translate"),s()()}r&2&&(o(2),V(d(3,1,"remove")))}function He(r,e){if(r&1&&(l(0,"app-form-fields",14),m(1,"translate"),l(2,"div",15)(3,"div"),c(4,"input",16),m(5,"translate"),w(6,Ue,3,3,"div",3),s(),w(7,Le,5,1,"div",17)(8,We,4,3,"div",18),s()()),r&2){let p,t=e.$implicit,i=e.index,n=y();k("formGroupName",i),a("label",d(1,10,"value"))("for","value")("required",!0),o(3),$(n.form.get("style").value==="color"?"col-sm-7 col-9":"col-sm-10 col-9"),o(),k("placeholder",d(5,12,"attribute_value")),o(2),a("ngIf",t.get("value").touched&&((p=t.get("value").errors)==null?null:p.required)),o(),a("ngIf",n.form.get("style").value==="color"),o(),a("ngIf",(n.valueControl==null||n.valueControl.controls==null?null:n.valueControl.controls.length)>1)}}var R=(()=>{let e=class e{constructor(t,i,n,f){this.store=t,this.route=i,this.router=n,this.formBuilder=f,this.documents=[{value:"",hex_color:"",id:""}],this.destroy$=new Q,this.variantStyle=[{value:"rectangle",label:"Rectangle"},{value:"circle",label:"Circle"},{value:"radio",label:"Radio"},{value:"dropdown",label:"Dropdown"},{value:"image",label:"Image"},{value:"color",label:"Color"}],this.form=this.formBuilder.group({name:new A("",[x.required]),style:new A("rectangle",[x.required]),status:new A(1),value:this.formBuilder.array([],[x.required])})}get valueControl(){return this.form.get("value")}ngOnInit(){this.route.params.pipe(H(t=>t.id?this.store.dispatch(new we(t.id)).pipe(W(()=>this.store.select(I.selectedAttribute))):L()),z(this.destroy$)).subscribe(t=>{this.id=t?.id,this.form.patchValue({name:t?.name,style:t?.style,status:t?.status}),t?.attribute_values.forEach(i=>this.valueControl.push(this.formBuilder.group({value:new A(i.value,[x.required]),hex_color:new A(i.hex_color),id:new A(i.id,[])})))}),this.type=="create"&&this.documents.forEach(t=>this.valueControl.push(this.formBuilder.group({value:[t.value,[x.required]],hex_color:[t.hex_color],id:[t.id]})))}add(t){t.preventDefault();let i=this.form.get("style").value==="color"?this.formBuilder.group({value:["",[x.required]],hex_color:[""]}):this.formBuilder.group({value:["",[x.required]]});this.valueControl.push(i)}remove(t){this.valueControl.length<=1||this.valueControl.removeAt(+t)}submit(){this.form.markAllAsTouched();let t=new xe(this.form.value);this.type=="edit"&&this.id&&(t=new Ae(this.form.value,this.id)),this.form.valid&&this.store.dispatch(t).subscribe({complete:()=>{this.router.navigateByUrl("/attribute")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};e.\u0275fac=function(i){return new(i||e)(C(P),C(re),C(D),C(ve))},e.\u0275cmp=h({type:e,selectors:[["app-form-attribute"]],inputs:{type:"type"},decls:23,vars:34,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","name","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","style",1,"custom-select","d-block",3,"data","placeholder","noResultMessage"],[1,"help-text"],["formArrayName","value"],[3,"label","for","required","formGroupName",4,"ngFor","ngForOf"],[1,"row"],[1,"col-2","offset-sm-2"],[3,"click","id","spinner"],[1,"border-up-class","mt-4"],[3,"id"],[1,"invalid-feedback"],[3,"label","for","required","formGroupName"],[1,"row","g-sm-4","g-3","align-items-center"],["type","text","formControlName","value",1,"form-control",3,"placeholder"],["class","col-sm-3 col-9",4,"ngIf"],["class","col-sm-2 col-3",4,"ngIf"],[1,"col-sm-3","col-9"],[1,"color-box"],["type","color","formControlName","hex_color",1,"form-control"],[1,"col-sm-2","col-3"],[1,"invalid-feedback","h-100","w-100","cursor-pointer",3,"click"]],template:function(i,n){i&1&&(l(0,"form",0),g("ngSubmit",function(){return n.submit()}),l(1,"app-form-fields",1),m(2,"translate"),c(3,"input",2),m(4,"translate"),w(5,Qe,3,3,"div",3),s(),l(6,"app-form-fields",1),c(7,"select2",4),m(8,"translate"),m(9,"translate"),l(10,"p",5),u(11),s()(),J(12,6),w(13,He,9,14,"app-form-fields",7),K(),l(14,"div",8)(15,"div",9)(16,"app-button",10),g("click",function(qe){return n.add(qe)}),u(17),m(18,"translate"),s()()(),l(19,"div",11)(20,"app-button",12),u(21),m(22,"translate"),s()()()),i&2&&(a("formGroup",n.form),o(),a("label",d(2,21,"attribute_name"))("for","name")("required",!0),o(2),k("placeholder",d(4,23,"attribute_name")),o(2),a("ngIf",n.form.controls.name.touched&&(n.form.controls.name.errors==null?null:n.form.controls.name.errors.required)),o(),a("label","style")("for","style")("required",!0),o(),k("noResultMessage",d(8,25,"no_data_found")),a("data",n.variantStyle!=null&&n.variantStyle.length?n.variantStyle:q(33,Oe))("placeholder",d(9,27,"select_style")),o(4),V("*Choose the desired shape style, such as rectangle or circle. Based on your selection, variant options will be displayed on product page."),o(2),a("ngForOf",n.valueControl.controls),o(3),$("btn btn-theme"),a("id","add_value_btn")("spinner",!1),o(),v(" ",d(18,29,"add_value")," "),o(3),a("id","attribute_btn"),o(),v(" ",d(22,31,n.type=="create"?"save_attribute":"update_attribute")," "))},dependencies:[ee,te,me,le,pe,se,de,fe,ce,ue,be,ge,he,j]});let r=e;return r})();var Ee=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=h({type:e,selectors:[["app-create-attribute"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,n){i&1&&(l(0,"app-page-wrapper",0),c(1,"app-form-attribute",1),s()),i&2&&(a("title","add_attribute"),o(),a("type","create"))},dependencies:[S,R]});let r=e;return r})();var Ne=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=h({type:e,selectors:[["app-edit-attribute"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,n){i&1&&(l(0,"app-page-wrapper",0),c(1,"app-form-attribute",1),s()),i&2&&(a("title","edit_attribute"),o(),a("type","edit"))},dependencies:[S,R]});let r=e;return r})();var ze=[{path:"",component:B,canActivate:[G],data:{permission:"attribute.index"}},{path:"create",component:Ee,canActivate:[G],data:{permission:["attribute.index","attribute.create"]}},{path:"edit/:id",component:Ne,canActivate:[G],data:{permission:["attribute.index","attribute.edit"]}}],Ve=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=N({type:e}),e.\u0275inj=E({imports:[O.forChild(ze),O]});let r=e;return r})();var Vt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=N({type:e}),e.\u0275inj=E({imports:[ie,Ve,ke,ne.forFeature([I])]});let r=e;return r})();export{Vt as AttributeModule};

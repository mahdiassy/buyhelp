import{Da as U,a as n,k as x,m as l,n as $,p as m}from"./chunk-AYDE6MWJ.js";import{$ as f,V as c,a as d,b as S,ca as h,n as o,xc as v}from"./chunk-RFGELG3T.js";var P=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Page] Get";let a=t;return a})(),j=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Page] Create";let a=t;return a})(),E=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Page] Edit";let a=t;return a})(),b=(()=>{let t=class t{constructor(e,r){this.payload=e,this.id=r}};t.type="[Page] Update";let a=t;return a})(),A=(()=>{let t=class t{constructor(e,r){this.id=e,this.status=r}};t.type="[Page] Update Status";let a=t;return a})(),I=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Page] Delete";let a=t;return a})(),L=(()=>{let t=class t{constructor(e){this.ids=e}};t.type="[Page] Delete All";let a=t;return a})();var R=(()=>{let t=class t{constructor(e){this.http=e}getPages(e){return this.http.get(`${n.URL}/page`,{params:e})}createPage(e){return this.http.post(`${n.URL}/page`,e)}editPage(e){return this.http.get(`${n.URL}/page/${e}`)}updatePage(e,r){return this.http.put(`${n.URL}/page/${e}`,r)}updatePageStatus(e,r){return this.http.put(`${n.URL}/page/${e}/${r}`,{})}deletePage(e){return this.http.delete(`${n.URL}/page/${e}`)}deleteAllPage(e){return this.http.post(`${n.URL}/page/deleteAll`,{ids:e})}};t.\u0275fac=function(r){return new(r||t)(h(v))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let a=t;return a})();var p,i=(p=class{constructor(t,s,e){this.store=t,this.notificationService=s,this.pageService=e}static page(t){return t.page}static pages(t){return t.page.data.map(s=>({label:s?.title,value:s?.slug}))}static selectedPage(t){return t.selectedPage}getPages(t,s){return this.pageService.getPages(s.payload).pipe(c({next:e=>{t.patchState({page:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}create(t,s){return this.pageService.createPage(s.payload).pipe(c({next:e=>{let r=t.getState();t.patchState(S(d({},r),{page:{data:[...r.page.data,e],total:r?.page.total+1}}))},complete:()=>{this.notificationService.showSuccess("Page Created Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}edit(t,{id:s}){return this.pageService.editPage(s).pipe(c({next:e=>{let r=t.getState();t.patchState(S(d({},r),{selectedPage:e}))},error:e=>{throw new Error(e?.error?.message)}}))}update(t,{payload:s,id:e}){return this.pageService.updatePage(e,s).pipe(c({next:r=>{if(typeof r=="object"){let g=t.getState(),u=[...g.page.data],y=u.findIndex(w=>w.id===e);u[y]=r,t.patchState(S(d({},g),{page:{data:u,total:g.page.total}}))}},complete:()=>{this.notificationService.showSuccess("Page Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}updateStatus(t,{id:s,status:e}){return this.pageService.updatePageStatus(s,e).pipe(c({next:r=>{if(typeof r=="object"){let g=t.getState(),u=[...g.page.data],y=u.findIndex(w=>w.id===s);u[y]=r,t.patchState(S(d({},g),{page:{data:u,total:g.page.total}}))}},complete:()=>{this.notificationService.showSuccess("Page Status Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}delete(t,{id:s}){return this.pageService.deletePage(s).pipe(c({next:()=>{this.store.dispatch(new P({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Page Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}deleteAll(t,{ids:s}){return this.pageService.deleteAllPage(s).pipe(c({next:()=>{this.store.dispatch(new P({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Pages Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}},p.\u0275fac=function(s){return new(s||p)(h(x),h(U),h(R))},p.\u0275prov=f({token:p,factory:p.\u0275fac}),p);o([l(P)],i.prototype,"getPages",null);o([l(j)],i.prototype,"create",null);o([l(E)],i.prototype,"edit",null);o([l(b)],i.prototype,"update",null);o([l(A)],i.prototype,"updateStatus",null);o([l(I)],i.prototype,"delete",null);o([l(L)],i.prototype,"deleteAll",null);o([m()],i,"page",null);o([m()],i,"pages",null);o([m()],i,"selectedPage",null);i=o([$({name:"page",defaults:{page:{data:[],total:0},selectedPage:null}})],i);export{P as a,j as b,E as c,b as d,A as e,I as f,L as g,i as h};

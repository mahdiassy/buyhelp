import{a as Z}from"./chunk-YK6OOJHV.js";import{A as H,B as _e,Bc as Ue,Dc as Ge,E as _,Ec as Le,Fb as je,G as he,Gb as qe,H as ve,Hb as Oe,Ib as Re,J as Ce,Jb as Qe,K as Te,Kb as $e,Lb as M,N as we,O as be,P as Ie,S as Se,Ua as Ke,ab as W,ea as xe,fa as Fe,ga as Ne,ha as Ve,ia as Ee,k as E,l as ye,lb as z,o as ue,ob as Me,rb as De,tb as Be,vb as ke,x as fe,y as L,yb as Ae,z as ge,zb as Pe}from"./chunk-AYDE6MWJ.js";import{Ea as n,Fa as v,Hb as se,Ib as A,Jb as le,Jc as G,Lc as V,Mc as de,Nb as m,Ob as c,Oc as Y,Qa as y,Rc as K,S as ae,Sa as a,T as pe,Ua as X,Wa as O,aa as P,ab as p,bb as l,cb as d,ga as C,gb as F,ha as j,i as ie,ic as U,jb as f,jc as x,kb as u,mc as me,n as oe,na as q,nb as S,oa as b,p as re,pa as I,rb as R,sb as Q,tb as $,tc as ce,u as ne,vb as g,wb as T,xb as k}from"./chunk-RFGELG3T.js";var it=["deleteModal"],ot=(e,t)=>[e,t];function rt(e,t){if(e&1&&(p(0,"a",8),d(1,"i",9),l()),e&2){let s=u();a("routerLink",le(1,ot,s.node.type=="post"?"/blog/category/edit":"/category/edit",s.node==null?null:s.node.id))}}function nt(e,t){if(e&1){let s=F();p(0,"a",10),f("click",function(){b(s);let r=u();return I(r.DeleteModal.openModal("delete",r.node))}),d(1,"i",11),l()}}function at(e,t){if(e&1&&d(0,"app-tree-node",13),e&2){let s=t.$implicit,i=u(2);a("node",s)("displayKey",i.displayKey)("recursionKey",i.recursionKey)}}function pt(e,t){if(e&1&&(p(0,"ul"),y(1,at,1,3,"app-tree-node",12),l()),e&2){let s=u();n(),a("ngForOf",s.node[s.recursionKey])}}var ze=(()=>{let t=class t{constructor(i,r,o){this.store=i,this.router=r,this.route=o,this.categoryType="product",this.showChildrenNode=!0}ngOnInit(){this.route.params.subscribe(i=>this.id=i.id)}delete(i,r){this.store.dispatch(new Qe(r.id,r.type)).subscribe({complete:()=>{r.type=="post"?this.router.navigateByUrl("/blog/category"):this.router.navigateByUrl("/category")}})}};t.\u0275fac=function(r){return new(r||t)(v(E),v(V),v(G))},t.\u0275cmp=C({type:t,selectors:[["app-tree-node"]],viewQuery:function(r,o){if(r&1&&R(it,5),r&2){let h;Q(h=$())&&(o.DeleteModal=h.first)}},inputs:{node:"node",recursionKey:"recursionKey",displayKey:"displayKey",categoryType:"categoryType"},decls:11,vars:10,consts:[["deleteModal",""],[1,"cursor-pointer"],["role","presentation",1,"tree-icon","file-icon",3,"click"],[1,"tree-options"],["href","javascript:void(0)",3,"routerLink",4,"hasPermission"],["href","javascript:void(0)",3,"click",4,"hasPermission"],[4,"ngIf"],[3,"deleteItem"],["href","javascript:void(0)",3,"routerLink"],[1,"ri-pencil-line","text-success"],["href","javascript:void(0)",3,"click"],[1,"ri-delete-bin-7-line","text-danger"],[3,"node","displayKey","recursionKey",4,"ngFor","ngForOf"],[3,"node","displayKey","recursionKey"]],template:function(r,o){if(r&1){let h=F();p(0,"li",1)(1,"div")(2,"i",2),f("click",function(){return b(h),I(o.showChildrenNode=!o.showChildrenNode)}),l(),p(3,"span"),g(4),l(),p(5,"div",3),y(6,rt,2,4,"a",4)(7,nt,2,0,"a",5),l()(),y(8,pt,2,1,"ul",6),l(),p(9,"app-delete-modal",7,0),f("deleteItem",function(te){return b(h),I(o.delete(te.actionToPerform,te.data))}),l()}r&2&&(X("inside-ul",o.node[o.recursionKey]&&o.node[o.recursionKey].length),n(3),O(o.node.id==o.id?"active":""),X("disabled",o.node.status!="1"),n(),T(o.node[o.displayKey]||(o.node==null?null:o.node.name)),n(2),a("hasPermission","category.edit"),n(),a("hasPermission","category.destroy"),n(),a("ngIf",o.node[o.recursionKey]&&o.node[o.recursionKey].length&&o.showChildrenNode))},dependencies:[U,x,de,Me,W,t]});let e=t;return e})();function mt(e,t){if(e&1&&d(0,"app-tree-node",8),e&2){let s=t.$implicit,i=u(2);a("node",s)("displayKey",i.displayKey)("recursionKey",i.recursionKey)("categoryType",i.categoryType)}}function ct(e,t){if(e&1&&(p(0,"ul",4)(1,"li",5)(2,"div"),d(3,"i",6),p(4,"span"),g(5),m(6,"translate"),l()(),p(7,"ul"),y(8,mt,1,4,"app-tree-node",7),l()()()),e&2){let s=u();n(5),T(c(6,2,"categories")),n(3),a("ngForOf",s.dataToShow)}}function dt(e,t){e&1&&d(0,"app-no-data",9),e&2&&(O("no-data-added category-no-data"),a("image","assets/svg/no-category.svg")("text","no_categories_found"))}var Xe=(()=>{let t=class t{constructor(){this.displayKey="name",this.categoryType="product",this.treeSearch=new _(""),this.dataToShow=[],this.treeSearch.valueChanges.subscribe(i=>{i?(this.dataToShow=[],this.data.forEach(r=>{this.hasValue(r)&&this.dataToShow.push(r)})):this.dataToShow=this.data})}ngOnChanges(){this.dataToShow=this.data}hasValue(i){let r=!1;return i[this.displayKey].toLowerCase().includes(this.treeSearch?.value?.toLowerCase())&&(r=!0),i[this.recursionKey]?.length&&i[this.recursionKey].forEach(o=>{this.hasValue(o)&&(r=!0)}),r}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=C({type:t,selectors:[["app-tree"]],inputs:{type:"type",data:"data",recursionKey:"recursionKey",displayKey:"displayKey",categoryType:"categoryType"},features:[q],decls:5,vars:6,consts:[[1,"theme-tree-box"],[1,"form-control",3,"placeholder","formControl"],["class","tree-main-ul",4,"ngIf"],[3,"class","image","text",4,"ngIf"],[1,"tree-main-ul"],[1,"cursor-pointer"],["role","presentation",1,"tree-icon","folder-icon"],[3,"node","displayKey","recursionKey","categoryType",4,"ngFor","ngForOf"],[3,"node","displayKey","recursionKey","categoryType"],[3,"image","text"]],template:function(r,o){r&1&&(p(0,"div",0),d(1,"input",1),m(2,"translate"),y(3,ct,9,4,"ul",2),l(),y(4,dt,1,4,"app-no-data",3)),r&2&&(n(),S("placeholder",c(2,4,"search_category")),a("formControl",o.treeSearch),n(2),a("ngIf",o.dataToShow==null?null:o.dataToShow.length),n(),a("ngIf",!(o.dataToShow!=null&&o.dataToShow.length)))},dependencies:[U,x,L,H,Ce,ke,ze,K]});let e=t;return e})();var J=e=>[e],ft=()=>[];function gt(e,t){e&1&&(p(0,"div",17),g(1),m(2,"translate"),l()),e&2&&(n(),k(" ",c(2,1,"name_is_required")," "))}function _t(e,t){e&1&&(p(0,"app-form-fields",2),m(1,"translate"),p(2,"div",18),d(3,"input",19),m(4,"translate"),p(5,"span",20),g(6,"%"),l()(),p(7,"p",21),g(8),l()()),e&2&&(a("label",c(1,5,"commission_rate"))("for","commission_rate")("required",!1),n(3),S("placeholder",c(4,7,"enter_commission_rate")),n(5),T("*Define the percentage of earnings retained as commission."))}var Ye=(()=>{let t=class t{constructor(i,r,o,h){this.store=i,this.route=r,this.router=o,this.formBuilder=h,this.categoryType="product",this.mediaConfig=Be,this.destroy$=new ie,this.form=this.formBuilder.group({name:new _("",[ge.required]),description:new _,parent_id:new _,type:new _(this.categoryType,[]),commission_rate:new _,category_image_id:new _,category_icon_id:new _,category_meta_image_id:new _,meta_title:new _,meta_description:new _,status:new _(!0)})}ngOnChanges(){this.form.controls.type.setValue(this.categoryType)}ngOnInit(){this.route.params.pipe(ae(i=>i.id?this.store.dispatch(new Oe(i.id)).pipe(ne(()=>this.store.select(M.selectedCategory))):re()),pe(this.destroy$)).subscribe(i=>{this.category=i,this.form.patchValue({name:this.category?.name,description:this.category?.description,parent_id:this.category?.parent_id,type:this.category?.type,commission_rate:this.category?.commission_rate,category_image_id:this.category?.category_image_id,category_icon_id:this.category?.category_icon_id,category_meta_image_id:this.category?.category_meta_image_id,meta_title:this.category?.meta_title,meta_description:this.category?.meta_description,status:this.category?.status})})}selectItem(i){Array.isArray(i)&&i.length?this.form.controls.parent_id.setValue(i[0]):this.form.controls.parent_id.setValue("")}selectCategoryImage(i){Array.isArray(i)||this.form.controls.category_image_id.setValue(i?i.id:"")}selectCategoryIcon(i){Array.isArray(i)||this.form.controls.category_icon_id.setValue(i?i.id:"")}selectMetaImage(i){Array.isArray(i)||this.form.controls.category_meta_image_id.setValue(i?i.id:"")}submit(){this.form.markAllAsTouched();let i=new qe(this.form.value);this.type=="edit"&&this.category?.id&&(i=new Re(this.form.value,this.category.id)),this.form.valid&&this.store.dispatch(i).subscribe({complete:()=>{this.type=="create"?(this.form.reset(),this.form.controls.category_image_id.setValue(""),this.form.controls.category_icon_id.setValue(""),this.form.controls.status.setValue(!0)):this.form.value.type==="product"?this.router.navigateByUrl("/category"):this.router.navigateByUrl("/blog/category")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(r){return new(r||t)(v(E),v(G),v(V),v(Se))},t.\u0275cmp=C({type:t,selectors:[["app-form-category"]],inputs:{type:"type",categories:"categories",categoryType:"categoryType"},features:[q],decls:39,vars:84,consts:[[3,"gridClass","title"],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[3,"label","for","required",4,"ngIf"],[3,"selectedItem","selectSingle","selectedOption","options","subArrayKey"],[3,"selectedFiles","multipleImage","accept","image"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"selectedFiles","accept","multipleImage","image"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"],[1,"input-group"],["id","commission_rate","type","number","min","0","max","100","oninput","if (value > 100) value = 100; if (value < 0) value = 0;","formControlName","commission_rate","numbersOnly","",1,"form-control",3,"placeholder"],[1,"input-group-text"],[1,"help-text"]],template:function(r,o){r&1&&(p(0,"app-page-wrapper",0)(1,"form",1),f("ngSubmit",function(){return o.submit()}),p(2,"app-form-fields",2),m(3,"translate"),d(4,"input",3),m(5,"translate"),y(6,gt,3,3,"div",4),l(),p(7,"app-form-fields",2),m(8,"translate"),d(9,"textarea",5),m(10,"translate"),l(),y(11,_t,9,9,"app-form-fields",6),p(12,"app-form-fields",2),m(13,"translate"),p(14,"app-advanced-dropdown",7),f("selectedItem",function(w){return o.selectItem(w)}),l()(),p(15,"app-form-fields",2),m(16,"translate"),p(17,"app-image-upload",8),f("selectedFiles",function(w){return o.selectCategoryImage(w)}),l()(),p(18,"app-form-fields",2),m(19,"translate"),p(20,"app-image-upload",8),f("selectedFiles",function(w){return o.selectCategoryIcon(w)}),l()(),p(21,"app-form-fields",2),d(22,"input",9),m(23,"translate"),l(),p(24,"app-form-fields",2),d(25,"textarea",10),m(26,"translate"),l(),p(27,"app-form-fields",2),m(28,"translate"),p(29,"app-image-upload",11),f("selectedFiles",function(w){return o.selectMetaImage(w)}),l()(),p(30,"app-form-fields",2),m(31,"translate"),p(32,"div",12)(33,"label",13),d(34,"input",14)(35,"span",15),l()()(),p(36,"app-button",16),g(37),m(38,"translate"),l()()()),r&2&&(a("gridClass","col-sm-12")("title",o.type+"_category"),n(),a("formGroup",o.form),n(),a("label",c(3,51,"name"))("for","name")("required",!0),n(2),S("placeholder",c(5,53,"enter_name")),n(2),a("ngIf",o.form.controls.name.touched&&(o.form.controls.name.errors==null?null:o.form.controls.name.errors.required)),n(),a("label",c(8,55,"description"))("for","description")("required",!1),n(2),S("placeholder",c(10,57,"enter_description")),n(2),a("ngIf",o.categoryType=="product"),n(),a("label",c(13,59,"select_parent"))("for","category")("required",!1),n(2),a("selectSingle",!0)("selectedOption",o.category&&o.category.parent_id?A(75,J,o.category.parent_id):se(77,ft))("options",o.categories)("subArrayKey","subcategories"),n(),a("label",c(16,61,"image"))("for","image")("required",!1),n(2),a("multipleImage",!1)("accept",A(78,J,o.mediaConfig.image))("image",o.category==null?null:o.category.category_image),n(),a("label",c(19,63,"icon"))("for","icon")("required",!1),n(2),a("multipleImage",!1)("accept",A(80,J,o.mediaConfig.image))("image",o.category==null?null:o.category.category_icon),n(),a("label","meta_title")("for","metatitle")("required",!1),n(),S("placeholder",c(23,65,"enter_meta_title")),n(2),a("label","meta_description")("for","desc")("required",!1),n(),S("placeholder",c(26,67,"enter_meta_description")),n(2),a("label",c(28,69,"meta_image"))("for","meta_image")("required",!1),n(2),a("accept",A(82,J,o.mediaConfig.image))("multipleImage",!1)("image",o.category==null?null:o.category.category_meta_image),n(),a("label",c(31,71,"status"))("for","status")("required",!1),n(6),a("id","category_btn"),n(),k(" ",c(38,73,o.type=="create"?"save_category":"update_category")," "))},dependencies:[x,he,L,ve,fe,H,_e,Ie,be,Te,we,De,Ae,z,Pe,Ke,Ge,K]});let e=t;return e})();var vt=["csvModal"];function Ct(e,t){if(e&1){let s=F();p(0,"button",15),f("click",function(){b(s);let r=u(3);return I(r.CSVModal.openModal())}),g(1),m(2,"translate"),l()}e&2&&(n(),T(c(2,1,"Bulk Import")))}function Tt(e,t){if(e&1){let s=F();p(0,"button",15),f("click",function(){b(s);let r=u(3);return I(r.export())}),g(1),m(2,"translate"),l()}e&2&&(n(),T(c(2,1,"Export")))}function wt(e,t){if(e&1){let s=F();p(0,"button",15),f("click",function(){b(s);let r=u(3);return I(r.create(r.type))}),g(1),m(2,"translate"),l()}e&2&&(n(),T(c(2,1,"create")))}function bt(e,t){if(e&1&&(p(0,"div",11)(1,"button",12),g(2),m(3,"translate"),l(),p(4,"div",13),y(5,Ct,3,3,"button",14)(6,Tt,3,3,"button",14)(7,wt,3,3,"button",14),l()()),e&2){let s=u(2);n(2),k(" ",c(3,4,"action")," "),n(3),a("ngIf",s.categoryType=="product"),n(),a("ngIf",s.categoryType=="product"),n(),a("ngIf",s.type=="edit")}}function It(e,t){if(e&1&&(p(0,"div",9),y(1,bt,8,6,"div",10),l()),e&2){let s=u();n(),a("ngIf",s.categoryType=="product"||s.type=="edit")}}function St(e,t){if(e&1&&(d(0,"app-form-category",16),m(1,"async")),e&2){let s,i=u();a("categories",(s=c(1,3,i.category$))==null?null:s.data)("type",i.type)("categoryType",i.categoryType)}}var B=class B{constructor(t,s){this.store=t,this.router=s,this.type="create",this.categoryType="product"}ngOnInit(){this.store.dispatch(new je({type:this.categoryType}))}export(){this.store.dispatch(new $e)}create(t){this.router.navigate([t=="post"?"/blog/category":"/category"])}};B.\u0275fac=function(s){return new(s||B)(v(E),v(V))},B.\u0275cmp=C({type:B,selectors:[["app-category"]],viewQuery:function(s,i){if(s&1&&R(vt,5),s&2){let r;Q(r=$())&&(i.CSVModal=r.first)}},inputs:{type:"type",categoryType:"categoryType"},decls:10,vars:11,consts:[["csvModal",""],[1,"row"],[1,"col-xl-4","p-0"],[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"data","recursionKey","type","categoryType"],[1,"col-xl-8","p-0"],[3,"categories","type","categoryType",4,"hasPermission"],[3,"module"],["button",""],["ngbDropdown","","class","d-inline-block dropdown-box",4,"ngIf"],["ngbDropdown","",1,"d-inline-block","dropdown-box"],["type","button","id","action","ngbDropdownToggle","",1,"btn","btn-sm","btn-outline"],["ngbDropdownMenu","","aria-labelledby","action",1,"dropdown-menu","dropdown-menu-end"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","",3,"click"],[3,"categories","type","categoryType"]],template:function(s,i){if(s&1&&(p(0,"div",1)(1,"div",2)(2,"app-page-wrapper",3),y(3,It,2,1,"div",4),d(4,"app-tree",5),m(5,"async"),l()(),p(6,"div",6),y(7,St,2,5,"app-form-category",7),l()(),d(8,"app-import-csv-modal",8,0)),s&2){let r;n(2),a("gridClass","col-sm-12")("title","categories"),n(),a("hasPermission","category.create"),n(),a("data",(r=c(5,9,i.category$))==null?null:r.data)("recursionKey","subcategories")("type",i.type)("categoryType",i.categoryType),n(3),a("hasPermission","category."+i.type),n(),a("module","category")}},dependencies:[x,Ee,Ve,Ne,xe,Fe,z,Ue,W,Xe,Ye,me,K]});var N=B;oe([ue(M.category)],N.prototype,"category$",void 0);var Ze=(()=>{let t=class t{constructor(){this.categoryType="product"}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=C({type:t,selectors:[["app-edit-category"]],inputs:{categoryType:"categoryType"},decls:1,vars:2,consts:[[3,"type","categoryType"]],template:function(r,o){r&1&&d(0,"app-category",0),r&2&&a("type","edit")("categoryType",o.categoryType)},dependencies:[N]});let e=t;return e})();var Ft=[{path:"",component:N,canActivate:[Z],data:{permission:"category.index"}},{path:"edit/:id",component:Ze,canActivate:[Z],data:{permission:["category.index","category.edit"]}}],et=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=j({type:t}),t.\u0275inj=P({imports:[Y.forChild(Ft),Y]});let e=t;return e})();var gi=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=j({type:t}),t.\u0275inj=P({imports:[ce,et,Le,ye.forFeature([M])]});let e=t;return e})();export{N as a,Ze as b,gi as c};

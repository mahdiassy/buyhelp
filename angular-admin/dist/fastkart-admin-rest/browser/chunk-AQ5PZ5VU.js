import{a as L}from"./chunk-YK6OOJHV.js";import{A as vt,B as yt,Da as bt,E as B,Ec as Tt,G as Ft,K as gt,N as St,S as Ct,Ua as wt,a as g,ab as xt,k as I,l as dt,lb as A,m as S,n as ft,o as ut,p as Z,qb as It,rb as At,x as ht,y as qt,z as tt}from"./chunk-AYDE6MWJ.js";import{$,Ea as n,Fa as v,Hb as nt,Jc as ct,Lc as M,Mc as mt,Nb as y,Ob as F,Oc as Y,Qa as k,Rc as R,S as ot,Sa as s,T as at,V as h,a as j,aa as U,ab as l,b as _,bb as c,ca as b,cb as f,ga as q,ha as N,i as et,jb as P,jc as st,n as m,nb as X,p as it,tc as pt,u as rt,vb as w,xb as x,xc as lt}from"./chunk-RFGELG3T.js";var T=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Faq] Get";let i=t;return i})(),G=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Faq] Create";let i=t;return i})(),V=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Faq] Edit";let i=t;return i})(),W=(()=>{let t=class t{constructor(e,r){this.payload=e,this.id=r}};t.type="[Faq] Update";let i=t;return i})(),H=(()=>{let t=class t{constructor(e,r){this.id=e,this.status=r}};t.type="[Faq] Update Status";let i=t;return i})();var O=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Faq] Delete";let i=t;return i})(),Q=(()=>{let t=class t{constructor(e){this.ids=e}};t.type="[Faq] Delete All";let i=t;return i})();var Et=(()=>{let t=class t{constructor(e){this.http=e}getFaqs(e){return this.http.get(`${g.URL}/faq`,{params:e})}createFaq(e){return this.http.post(`${g.URL}/faq`,e)}editFaq(e){return this.http.get(`${g.URL}/faq/${e}`)}updateFaq(e,r){return this.http.put(`${g.URL}/faq/${e}`,r)}updateFaqStatus(e,r){return this.http.put(`${g.URL}/faq/${e}/${r}`,{})}deleteFaq(e){return this.http.delete(`${g.URL}/faq/${e}`)}deleteAllFaq(e){return this.http.post(`${g.URL}/faq/deleteAll`,{ids:e})}};t.\u0275fac=function(r){return new(r||t)(b(lt))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var u,p=(u=class{constructor(t,a,e){this.store=t,this.notificationService=a,this.faqService=e}static faq(t){return t.faq}static selectedFaq(t){return t.selectedFaq}getFaqs(t,a){return this.faqService.getFaqs(a.payload).pipe(h({next:e=>{t.patchState({faq:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}create(t,a){return this.faqService.createFaq(a.payload).pipe(h({next:e=>{let r=t.getState();t.patchState(_(j({},r),{faq:{data:[...r.faq.data,e],total:r?.faq.total+1}}))},complete:()=>{this.notificationService.showSuccess("Faq Created Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}edit(t,{id:a}){return this.faqService.editFaq(a).pipe(h({next:e=>{let r=t.getState();t.patchState(_(j({},r),{selectedFaq:e}))},error:e=>{throw new Error(e?.error?.message)}}))}update(t,{payload:a,id:e}){return this.faqService.updateFaq(e,a).pipe(h({next:r=>{if(typeof r=="object"){let o=t.getState(),d=[...o.faq.data],J=d.findIndex(K=>K.id===e);d[J]=r,t.patchState(_(j({},o),{faq:{data:d,total:o.faq.total}}))}},complete:()=>{this.notificationService.showSuccess("Faq Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}updateStatus(t,{id:a,status:e}){return this.faqService.updateFaqStatus(a,e).pipe(h({next:r=>{if(typeof r=="object"){let o=t.getState(),d=[...o.faq.data],J=d.findIndex(K=>K.id===a);d[J]=r,t.patchState(_(j({},o),{faq:{data:d,total:o.faq.total}}))}},complete:()=>{this.notificationService.showSuccess("Faq Status Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}delete(t,{id:a}){return this.faqService.deleteFaq(a).pipe(h({next:()=>{this.store.dispatch(new T({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Faq Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}deleteAll(t,{ids:a}){return this.faqService.deleteAllFaq(a).pipe(h({next:()=>{this.store.dispatch(new T({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Faqs Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}},u.\u0275fac=function(a){return new(a||u)(b(I),b(bt),b(Et))},u.\u0275prov=$({token:u,factory:u.\u0275fac}),u);m([S(T)],p.prototype,"getFaqs",null);m([S(G)],p.prototype,"create",null);m([S(V)],p.prototype,"edit",null);m([S(W)],p.prototype,"update",null);m([S(H)],p.prototype,"updateStatus",null);m([S(O)],p.prototype,"delete",null);m([S(Q)],p.prototype,"deleteAll",null);m([Z()],p,"faq",null);m([Z()],p,"selectedFaq",null);p=m([ft({name:"faq",defaults:{faq:{data:[],total:0},selectedFaq:null}})],p);function Bt(i,t){i&1&&(l(0,"div",10),w(1),y(2,"translate"),c()),i&2&&(n(),x(" ",F(2,1,"title_is_required")," "))}function Rt(i,t){i&1&&(l(0,"div",10),w(1),y(2,"translate"),c()),i&2&&(n(),x(" ",F(2,1,"description_is_required")," "))}var z=(()=>{let t=class t{constructor(e,r,o,d){this.store=e,this.router=r,this.route=o,this.formBuilder=d,this.destroy$=new et,this.form=this.formBuilder.group({title:new B("",[tt.required]),description:new B("",[tt.required]),status:new B(!0)})}ngOnInit(){this.route.params.pipe(ot(e=>e.id?this.store.dispatch(new V(e.id)).pipe(rt(()=>this.store.select(p.selectedFaq))):it()),at(this.destroy$)).subscribe(e=>{this.faq=e,this.form.patchValue({title:this.faq?.title,description:this.faq?.description,status:this.faq?.status})})}submit(){this.form.markAllAsTouched();let e=new G(this.form.value);this.type=="edit"&&this.faq?.id&&(e=new W(this.form.value,this.faq.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/faq")}})}};t.\u0275fac=function(r){return new(r||t)(v(I),v(M),v(ct),v(Ct))},t.\u0275cmp=q({type:t,selectors:[["app-form-faq"]],inputs:{type:"type"},decls:17,vars:22,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"]],template:function(r,o){r&1&&(l(0,"form",0),P("ngSubmit",function(){return o.submit()}),l(1,"app-form-fields",1),f(2,"input",2),y(3,"translate"),k(4,Bt,3,3,"div",3),c(),l(5,"app-form-fields",1),f(6,"textarea",4),y(7,"translate"),k(8,Rt,3,3,"div",3),c(),l(9,"app-form-fields",1)(10,"div",5)(11,"label",6),f(12,"input",7)(13,"span",8),c()()(),l(14,"app-button",9),w(15),y(16,"translate"),c()()),r&2&&(s("formGroup",o.form),n(),s("label","title")("for","title")("required",!0),n(),X("placeholder",F(3,16,"enter_title")),n(2),s("ngIf",o.form.controls.title.touched&&(o.form.controls.title.errors==null?null:o.form.controls.title.errors.required)),n(),s("label","description")("for","description")("required",!0),n(),X("placeholder",F(7,18,"enter_description")),n(2),s("ngIf",o.form.controls.description.touched&&(o.form.controls.description.errors==null?null:o.form.controls.description.errors.required)),n(),s("label","status")("for","status")("required",!1),n(5),s("id","faq_btn"),n(),x(" ",F(16,20,o.type=="create"?"save_faq":"update_faq")," "))},dependencies:[st,Ft,qt,ht,vt,yt,gt,St,At,wt,R]});let i=t;return i})();var Dt=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=q({type:t,selectors:[["app-create-faq"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(r,o){r&1&&(l(0,"app-page-wrapper",0),f(1,"app-form-faq",1),c()),r&2&&(s("title","create_faq"),n(),s("type","create"))},dependencies:[A,z]});let i=t;return i})();var $t=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=q({type:t,selectors:[["app-edit-faq"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(r,o){r&1&&(l(0,"app-page-wrapper",0),f(1,"app-form-faq",1),c()),r&2&&(s("title","edit_faq"),n(),s("type","edit"))},dependencies:[A,z]});let i=t;return i})();var Lt=()=>["/faq/create"];function Gt(i,t){i&1&&(l(0,"div",3)(1,"a",4),f(2,"i",5),w(3),y(4,"translate"),c()()),i&2&&(n(),s("routerLink",nt(4,Lt)),n(2),x(" ",F(4,2,"add_faq")," "))}var E=class E{constructor(t,a){this.store=t,this.router=a,this.tableConfig={columns:[{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"faq.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"faq.destroy"}],data:[],total:0}}ngOnInit(){this.faq$.subscribe(t=>{this.tableConfig.data=t?t?.data:[],this.tableConfig.total=t?t?.total:0})}onTableChange(t){this.store.dispatch(new T(t))}onActionClicked(t){t.actionToPerform=="edit"?this.edit(t.data):t.actionToPerform=="status"?this.status(t.data):t.actionToPerform=="delete"?this.delete(t.data):t.actionToPerform=="deleteAll"&&this.deleteAll(t.data)}edit(t){this.router.navigateByUrl(`/faq/edit/${t.id}`)}status(t){this.store.dispatch(new H(t.id,t.status))}delete(t){this.store.dispatch(new O(t.id))}deleteAll(t){this.store.dispatch(new Q(t))}};E.\u0275fac=function(a){return new(a||E)(v(I),v(M))},E.\u0275cmp=q({type:E,selectors:[["app-faq"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(a,e){a&1&&(l(0,"app-page-wrapper",0),k(1,Gt,5,5,"div",1),l(2,"app-table",2),P("tableChanged",function(o){return e.onTableChange(o)})("rowClicked",function(o){return e.edit(o)})("action",function(o){return e.onActionClicked(o)}),c()()),a&2&&(s("gridClass","col-sm-12")("title","FAQ's"),n(),s("hasPermission","faq.create"),n(),s("tableConfig",e.tableConfig)("hasCheckbox",!0))},dependencies:[mt,It,A,xt,R]});var D=E;m([ut(p.faq)],D.prototype,"faq$",void 0);var Vt=[{path:"",component:D,canActivate:[L],data:{permission:"faq.index"}},{path:"create",component:Dt,canActivate:[L],data:{permission:["faq.index","faq.create"]}},{path:"edit/:id",component:$t,canActivate:[L],data:{permission:["faq.index","faq.edit"]}}],Ut=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=N({type:t}),t.\u0275inj=U({imports:[Y.forChild(Vt),Y]});let i=t;return i})();var Ne=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=N({type:t}),t.\u0275inj=U({imports:[pt,Ut,Tt,dt.forFeature([p])]});let i=t;return i})();export{Ne as FaqModule};

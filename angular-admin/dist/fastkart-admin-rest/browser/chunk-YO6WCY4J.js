import{Da as U,a as p,k as v,m as l,n as $,p as f}from"./chunk-AYDE6MWJ.js";import{$ as S,V as n,a as h,b as m,ca as d,n as o,xc as g}from"./chunk-RFGELG3T.js";var T=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Tax] Get";let a=t;return a})(),j=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Tax] Create";let a=t;return a})(),E=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Tax] Edit";let a=t;return a})(),b=(()=>{let t=class t{constructor(e,r){this.payload=e,this.id=r}};t.type="[Tax] Update";let a=t;return a})(),A=(()=>{let t=class t{constructor(e,r){this.id=e,this.status=r}};t.type="[Tax] Update Status";let a=t;return a})(),I=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Tax] Delete";let a=t;return a})(),L=(()=>{let t=class t{constructor(e){this.ids=e}};t.type="[Tax] Delete All";let a=t;return a})();var R=(()=>{let t=class t{constructor(e){this.http=e}getTaxes(e){return this.http.get(`${p.URL}/tax`,{params:e})}createTax(e){return this.http.post(`${p.URL}/tax`,e)}editTax(e){return this.http.get(`${p.URL}/tax/${e}`)}updateTax(e,r){return this.http.put(`${p.URL}/tax/${e}`,r)}updateTaxStatus(e,r){return this.http.put(`${p.URL}/tax/${e}/${r}`,{})}deleteTax(e){return this.http.delete(`${p.URL}/tax/${e}`)}deleteAllTax(e){return this.http.post(`${p.URL}/tax/deleteAll`,{ids:e})}};t.\u0275fac=function(r){return new(r||t)(d(g))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let a=t;return a})();var c,i=(c=class{constructor(t,s,e){this.store=t,this.notificationService=s,this.taxService=e}static tax(t){return t.tax}static taxes(t){return t.tax.data.map(s=>({label:s?.name,value:s?.id}))}static selectedTax(t){return t.selectedTax}getTaxes(t,s){return this.taxService.getTaxes(s.payload).pipe(n({next:e=>{t.patchState({tax:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}create(t,s){return this.taxService.createTax(s.payload).pipe(n({next:e=>{let r=t.getState();t.patchState(m(h({},r),{tax:{data:[...r.tax.data,e],total:r?.tax.total+1}}))},complete:()=>{this.notificationService.showSuccess("Tax Created Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}edit(t,{id:s}){return this.taxService.editTax(s).pipe(n({next:e=>{let r=t.getState();t.patchState(m(h({},r),{selectedTax:e}))},error:e=>{throw new Error(e?.error?.message)}}))}update(t,{payload:s,id:e}){return this.taxService.updateTax(e,s).pipe(n({next:r=>{if(typeof r=="object"){let x=t.getState(),u=[...x.tax.data],y=u.findIndex(w=>w.id===e);u[y]=r,t.patchState(m(h({},x),{tax:{data:u,total:x.tax.total}}))}},complete:()=>{this.notificationService.showSuccess("Tax Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}updateStatus(t,{id:s,status:e}){return this.taxService.updateTaxStatus(s,e).pipe(n({next:r=>{if(typeof r=="object"){let x=t.getState(),u=[...x.tax.data],y=u.findIndex(w=>w.id===s);u[y]=r,t.patchState(m(h({},x),{tax:{data:u,total:x.tax.total}}))}},complete:()=>{this.notificationService.showSuccess("Tax Status Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}delete(t,{id:s}){return this.taxService.deleteTax(s).pipe(n({next:()=>{this.store.dispatch(new T({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Tax Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}deleteAll(t,{ids:s}){return this.taxService.deleteAllTax(s).pipe(n({next:()=>{this.store.dispatch(new T({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Tax Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}},c.\u0275fac=function(s){return new(s||c)(d(v),d(U),d(R))},c.\u0275prov=S({token:c,factory:c.\u0275fac}),c);o([l(T)],i.prototype,"getTaxes",null);o([l(j)],i.prototype,"create",null);o([l(E)],i.prototype,"edit",null);o([l(b)],i.prototype,"update",null);o([l(A)],i.prototype,"updateStatus",null);o([l(I)],i.prototype,"delete",null);o([l(L)],i.prototype,"deleteAll",null);o([f()],i,"tax",null);o([f()],i,"taxes",null);o([f()],i,"selectedTax",null);i=o([$({name:"tax",defaults:{tax:{data:[],total:0},selectedTax:null}})],i);export{T as a,j as b,E as c,b as d,A as e,I as f,L as g,i as h};

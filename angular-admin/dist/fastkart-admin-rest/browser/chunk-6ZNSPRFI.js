import{Da as R,a as h,k as x,m as p,n as v,p as S}from"./chunk-AYDE6MWJ.js";import{$ as N,V as a,a as m,b as f,ca as d,n as c,xc as w}from"./chunk-RFGELG3T.js";var g=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Notice] Get";let o=t;return o})(),j=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Notice] Create";let o=t;return o})(),$=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Notice] Edit";let o=t;return o})(),k=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Notice] Resent";let o=t;return o})(),E=(()=>{let t=class t{constructor(e,r){this.payload=e,this.id=r}};t.type="[Notice] Update";let o=t;return o})();var U=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Notice] MarkAsRead";let o=t;return o})(),A=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Notice] Delete";let o=t;return o})();var I=(()=>{let t=class t{constructor(e){this.http=e}getNotice(e){return this.http.get(`${h.URL}/notice`,{params:e})}createNotice(e){return this.http.post(`${h.URL}/notice`,e)}editNotice(e){return this.http.get(`${h.URL}/notice/${e}`)}updateNotice(e,r){return this.http.put(`${h.URL}/notice/${e}`,r)}markAsRead(e){return this.http.put(`${h.URL}/notice/markAsRead/${e}`,{})}deleteNotice(e){return this.http.delete(`${h.URL}/notice/${e}`)}};t.\u0275fac=function(r){return new(r||t)(d(w))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var s,n=(s=class{constructor(t,i,e){this.store=t,this.notificationService=i,this.noticeService=e}static notice(t){return t.notice}static selectedNotice(t){return t.selectedNotice}static recentNotice(t){return t.recentNotice}getNotices(t,i){return this.noticeService.getNotice(i.payload).pipe(a({next:e=>{t.patchState({notice:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}create(t,i){return this.noticeService.createNotice(i.payload).pipe(a({next:e=>{let r=t.getState();t.patchState(f(m({},r),{notice:{data:[...r.notice.data,e],total:r?.notice.total+1}}))},complete:()=>{this.notificationService.showSuccess("Notice Created Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}edit(t,{id:i}){return this.noticeService.editNotice(i).pipe(a({next:e=>{let r=t.getState();t.patchState(f(m({},r),{selectedNotice:e}))},error:e=>{throw new Error(e?.error?.message)}}))}recentNotice(t,{id:i}){return this.noticeService.editNotice(i).pipe(a({next:e=>{t.patchState({recentNotice:e?.is_read===0?e:null})},error:e=>{throw new Error(e?.error?.message)}}))}update(t,{payload:i,id:e}){return this.noticeService.updateNotice(e,i).pipe(a({next:r=>{if(typeof r=="object"){let l=t.getState(),u=[...l.notice.data],y=u.findIndex(b=>b.id===e);u[y]=r,t.patchState(f(m({},l),{notice:{data:u,total:l.notice.total}}))}},complete:()=>{this.notificationService.showSuccess("Notice Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}markAsRead(t,{id:i}){return this.noticeService.markAsRead(i).pipe(a({next:e=>{if(typeof e=="object"){let r=t.getState(),l=[...r.notice.data],u=l.findIndex(y=>y.id===i);l[u]=e,t.patchState(f(m({},r),{notice:{data:l,total:r.notice.total},recentNotice:null}))}},error:e=>{throw new Error(e?.error?.message)}}))}delete(t,{id:i}){return this.noticeService.deleteNotice(i).pipe(a({next:()=>{this.store.dispatch(new g({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Notice Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}},s.\u0275fac=function(i){return new(i||s)(d(x),d(R),d(I))},s.\u0275prov=N({token:s,factory:s.\u0275fac}),s);c([p(g)],n.prototype,"getNotices",null);c([p(j)],n.prototype,"create",null);c([p($)],n.prototype,"edit",null);c([p(k)],n.prototype,"recentNotice",null);c([p(E)],n.prototype,"update",null);c([p(U)],n.prototype,"markAsRead",null);c([p(A)],n.prototype,"delete",null);c([S()],n,"notice",null);c([S()],n,"selectedNotice",null);c([S()],n,"recentNotice",null);n=c([v({name:"notice",defaults:{notice:{data:[],total:0},selectedNotice:null,recentNotice:null}})],n);export{g as a,j as b,$ as c,k as d,E as e,U as f,A as g,n as h};

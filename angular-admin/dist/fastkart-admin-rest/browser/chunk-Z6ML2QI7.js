import{b as z}from"./chunk-37M4JFKN.js";import{b as Ae}from"./chunk-TNRML6R7.js";import{a as Ee,b as qe,c as Fe,d as Te,e as Ne,f as ke,g as xe,h as w}from"./chunk-HVSDMYXV.js";import{a as Me,b as Pe}from"./chunk-KFHQ6TSR.js";import{a as G}from"./chunk-YK6OOJHV.js";import{A as de,B as me,E as c,Ec as Be,G as ce,H as fe,K as ue,N as _e,Oa as he,S as ve,Ua as ye,ab as ge,fb as Se,k as R,l as le,lb as q,o as E,qb as Ce,rb as we,tb as be,x as pe,y as se,yb as Ie,z as h}from"./chunk-AYDE6MWJ.js";import{Ea as i,Fa as S,Hb as k,Ib as te,Jc as ne,Lc as D,Mc as ae,Nb as o,Ob as n,Oc as W,Qa as v,Rb as O,Rc as j,S as Q,Sa as a,T as X,Xa as Y,aa as M,ab as l,bb as p,cb as d,ga as g,gb as Z,ha as A,i as H,jb as B,jc as ie,kb as $,mc as re,n as I,nb as u,oa as P,p as J,pa as V,s as L,tc as oe,u as K,ub as U,vb as f,wb as ee,xb as _}from"./chunk-RFGELG3T.js";var ze=()=>["/store/create"];function He(r,e){r&1&&(l(0,"div",3)(1,"a",4),d(2,"i",5),f(3),o(4,"translate"),p()()),r&2&&(i(),a("routerLink",k(4,ze)),i(2),_(" ",n(4,2,"add_store")," "))}var F=class F{constructor(e,s){this.store=e,this.router=s,this.tableConfig={columns:[{title:"Logo",dataField:"store_logo",class:"tbl-logo-image",type:"image",key:"store_name"},{title:"store_name",dataField:"store_name"},{title:"name",dataField:"vendor_name"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"approved",dataField:"is_approved",type:"switch",canAllow:["admin"]}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"store.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"store.destroy"},{label:"View",actionToPerform:"view",icon:"ri-eye-line"}],data:[],total:0},this.setting$.subscribe(t=>{this.url=t.general.site_url})}ngOnInit(){this.store$.subscribe(e=>{let s=e?.data?.filter(t=>(t.vendor_name=t.vendor.name,t));this.tableConfig.data=s||[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new Ee(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="is_approved"?this.approve(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"?this.deleteAll(e.data):e.actionToPerform=="view"&&this.view(e.data)}edit(e){this.router.navigateByUrl(`/store/edit/${e.id}`)}approve(e){this.store.dispatch(new Ne(e.id,e.is_approved))}delete(e){this.store.dispatch(new ke(e.id))}deleteAll(e){this.store.dispatch(new xe(e))}view(e){window.open(this.url+"/seller/store/"+e.slug,"_blank")}};F.\u0275fac=function(s){return new(s||F)(S(R),S(D))},F.\u0275cmp=g({type:F,selectors:[["app-store"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(s,t){s&1&&(l(0,"app-page-wrapper",0),v(1,He,5,5,"div",1),l(2,"app-table",2),B("tableChanged",function(y){return t.onTableChange(y)})("rowClicked",function(y){return t.edit(y)})("action",function(y){return t.onActionClicked(y)}),p()()),s&2&&(a("gridClass","col-sm-12")("title","store"),i(),a("hasPermission","store.create"),i(),a("tableConfig",t.tableConfig)("hasCheckbox",!0))},dependencies:[ae,Ce,q,ge,j]});var T=F;I([E(w.store)],T.prototype,"store$",void 0);I([E(he.setting)],T.prototype,"setting$",void 0);var Je=r=>[r],$e=()=>[];function Ke(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"store_name_is_required")," "))}function Qe(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"description_is_required")," "))}function Xe(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"country_is_required")," "))}function Ye(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"state_is_required")," "))}function Ze(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"city_is_required")," "))}function et(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"address_is_required")," "))}function tt(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"pincode_is_required")," "))}function it(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"name_is_required")," "))}function rt(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"email_is_required")," "))}function ot(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"invalid_email")," "))}function nt(r,e){if(r&1&&(l(0,"div",33)(1,"div",34),d(2,"div"),p(),l(3,"span",35),f(4),p()()),r&2){let s=e.data;i(2),Y("iti-flag ",s==null?null:s.class,""),i(2),ee(s.code)}}function at(r,e){r&1&&(l(0,"div",36),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"phone_number_is_required")," "))}function lt(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"phone _number _is _invalid")," "))}function pt(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"password_is_required")," "))}function st(r,e){if(r&1&&(l(0,"app-form-fields",3),o(1,"translate"),d(2,"input",37),o(3,"translate"),v(4,pt,3,3,"div",6),p()),r&2){let s=$();a("label",n(1,5,"password"))("for","password")("required",!0),i(2),u("placeholder",n(3,7,"enter_password")),i(2),a("ngIf",(s.form==null||s.form.controls.password==null?null:s.form.controls.password.touched)&&(s.form==null||s.form.controls.password==null||s.form.controls.password.errors==null?null:s.form.controls.password.errors.required))}}function dt(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"confirm_password_is_required")," "))}function mt(r,e){r&1&&(l(0,"div",32),f(1),o(2,"translate"),p()),r&2&&(i(),_(" ",n(2,1,"confirm_password_does_not_matched")," "))}function ct(r,e){if(r&1&&v(0,mt,3,3,"div",6),r&2){let s=$(2);a("ngIf",s.passwordMatchError)}}function ft(r,e){if(r&1&&(l(0,"app-form-fields",3),o(1,"translate"),d(2,"input",38),o(3,"translate"),v(4,dt,3,3,"div",39)(5,ct,1,1,"ng-template",null,1,O),p()),r&2){let s=U(6),t=$();a("label",n(1,6,"confirm_password"))("for","password_confirmation")("required",!0),i(2),u("placeholder",n(3,8,"enter_confirm_password")),i(2),a("ngIf",(t.form==null||t.form.controls.password_confirmation==null?null:t.form.controls.password_confirmation.touched)&&(t.form==null||t.form.controls.password_confirmation==null||t.form.controls.password_confirmation.errors==null?null:t.form.controls.password_confirmation.errors.required))("ngIfElse",s)}}var N=class N{constructor(e,s,t,m){this.store=e,this.route=s,this.router=t,this.formBuilder=m,this.destroy$=new H,this.codes=Pe,this.mediaConfig=be,this.form=this.formBuilder.group({store_name:new c("",[h.required]),description:new c("",[h.required]),country_id:new c("",[h.required]),state_id:new c("",[h.required]),city:new c("",[h.required]),address:new c("",[h.required]),pincode:new c("",[h.required]),name:new c("",[h.required]),email:new c("",[h.required,h.email]),phone:new c("",[h.required]),country_code:new c("91",[h.required]),password:new c("",[h.required]),password_confirmation:new c("",[h.required]),store_logo_id:new c(""),hide_vendor_email:new c(0),hide_vendor_phone:new c(0),status:new c(1),facebook:new c(""),instagram:new c(""),pinterest:new c(""),youtube:new c(""),twitter:new c("")},{validator:Me.MatchValidator("password","password_confirmation")})}get passwordMatchError(){return this.form.getError("mismatch")&&this.form.get("password_confirmation")?.touched}ngOnInit(){this.route.params.pipe(Q(e=>e.id?(this.states$=this.store.select(z.states).pipe(L(s=>s(null))),this.store.dispatch(new Fe(e.id)).pipe(K(()=>this.store.select(w.selectedStore)))):J()),X(this.destroy$)).subscribe(e=>{this.id=e?.id,this.form.patchValue({store_name:e?.store_name,description:e?.description,country_id:e?.country_id,state_id:e?.state_id,city:e?.city,address:e?.address,pincode:e?.pincode,name:e?.vendor?.name,email:e?.vendor?.email,country_code:e?.vendor?.country_code,phone:e?.vendor?.phone,store_logo_id:e?.store_logo_id,hide_vendor_email:e?.hide_vendor_email,hide_vendor_phone:e?.hide_vendor_phone,status:e?.status,facebook:e?.facebook,instagram:e?.instagram,pinterest:e?.pinterest,youtube:e?.youtube,twitter:e?.twitter})})}countryChange(e){e&&e?.value?(this.states$=this.store.select(z.states).pipe(L(s=>s(+e?.value))),this.form.controls.state_id.setValue("")):this.form.controls.state_id.setValue("")}selectStoreLogo(e){Array.isArray(e)||this.form.controls.store_logo_id.setValue(e?e.id:"")}submit(){this.form.markAllAsTouched();let e=new qe(this.form.value);this.type=="edit"&&this.id&&(this.form.removeControl("password"),this.form.removeControl("password_confirmation"),e=new Te(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.form.reset(),this.router.navigateByUrl("/store")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};N.\u0275fac=function(s){return new(s||N)(S(R),S(ne),S(D),S(ve))},N.\u0275cmp=g({type:N,selectors:[["app-form-store"]],inputs:{type:"type"},decls:105,vars:175,consts:[["template",""],["error",""],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],[3,"selectedFiles","multipleImage","accept","image","helpText"],["type","text","formControlName","store_name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],["formControlName","country_id","resettable","",1,"custom-select",3,"update","data","placeholder","noResultMessage"],["formControlName","state_id","resettable","",1,"custom-select",3,"data","placeholder","noResultMessage"],["type","text","name","city","formControlName","city",1,"form-control",3,"placeholder"],["type","text","name","address","formControlName","address",1,"form-control",3,"placeholder"],["type","number","name","pincode","formControlName","pincode",1,"form-control",3,"placeholder"],["type","text","name","name","formControlName","name",1,"form-control",3,"placeholder"],["type","text","name","email","formControlName","email",1,"form-control",3,"placeholder"],["formControlName","country_code",1,"custom-select","intl-tel-input",3,"templates","data","noResultMessage"],["type","number","formControlName","phone","name","phone",1,"form-control","intl-input-padding",3,"placeholder"],["class","invalid-feedback","autocomplete","false",4,"ngIf"],[3,"label","for","required",4,"ngIf"],[3,"label","for"],["type","url","formControlName","facebook",1,"form-control",3,"placeholder"],["type","url","formControlName","instagram",1,"form-control",3,"placeholder"],["type","url","formControlName","twitter",1,"form-control",3,"placeholder"],["type","url","formControlName","youtube",1,"form-control",3,"placeholder"],["type","url","formControlName","pinterest",1,"form-control",3,"placeholder"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","hide_vendor_email","formControlName","hide_vendor_email"],[1,"switch-state"],["type","checkbox","id","hide_vendor_phone","formControlName","hide_vendor_phone"],["type","checkbox","id","status","formControlName","status"],[3,"id"],[1,"invalid-feedback"],[1,"country"],[1,"flag-box"],[1,"dial-code"],["autocomplete","false",1,"invalid-feedback"],["type","password","name","password","formControlName","password",1,"form-control",3,"placeholder"],["type","password","name","password_confirmation","formControlName","password_confirmation",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf","ngIfElse"]],template:function(s,t){if(s&1){let m=Z();l(0,"form",2),B("ngSubmit",function(){return P(m),V(t.submit())}),l(1,"app-form-fields",3),o(2,"translate"),l(3,"app-image-upload",4),o(4,"async"),B("selectedFiles",function(b){return P(m),V(t.selectStoreLogo(b))}),p()(),l(5,"app-form-fields",3),o(6,"translate"),d(7,"input",5),o(8,"translate"),v(9,Ke,3,3,"div",6),p(),l(10,"app-form-fields",3),o(11,"translate"),d(12,"textarea",7),o(13,"translate"),v(14,Qe,3,3,"div",6),p(),l(15,"app-form-fields",3),o(16,"translate"),l(17,"select2",8),o(18,"translate"),o(19,"async"),o(20,"async"),o(21,"translate"),B("update",function(b){return P(m),V(t.countryChange(b))}),p(),v(22,Xe,3,3,"div",6),p(),l(23,"app-form-fields",3),o(24,"translate"),d(25,"select2",9),o(26,"translate"),o(27,"async"),o(28,"async"),o(29,"translate"),v(30,Ye,3,3,"div",6),p(),l(31,"app-form-fields",3),o(32,"translate"),d(33,"input",10),o(34,"translate"),v(35,Ze,3,3,"div",6),p(),l(36,"app-form-fields",3),o(37,"translate"),d(38,"input",11),o(39,"translate"),v(40,et,3,3,"div",6),p(),l(41,"app-form-fields",3),o(42,"translate"),d(43,"input",12),o(44,"translate"),v(45,tt,3,3,"div",6),p(),l(46,"app-form-fields",3),o(47,"translate"),d(48,"input",13),o(49,"translate"),v(50,it,3,3,"div",6),p(),l(51,"app-form-fields",3),o(52,"translate"),d(53,"input",14),o(54,"translate"),v(55,rt,3,3,"div",6)(56,ot,3,3,"div",6),p(),l(57,"app-form-fields",3),o(58,"translate"),l(59,"select2",15),o(60,"translate"),v(61,nt,5,4,"ng-template",null,0,O),p(),d(63,"input",16),o(64,"translate"),v(65,at,3,3,"div",17)(66,lt,3,3,"div",6),p(),v(67,st,5,9,"app-form-fields",18)(68,ft,7,10,"app-form-fields",18),l(69,"app-form-fields",19),d(70,"input",20),o(71,"translate"),p(),l(72,"app-form-fields",19),d(73,"input",21),o(74,"translate"),p(),l(75,"app-form-fields",19),d(76,"input",22),o(77,"translate"),p(),l(78,"app-form-fields",19),d(79,"input",23),o(80,"translate"),p(),l(81,"app-form-fields",19),d(82,"input",24),o(83,"translate"),p(),l(84,"app-form-fields",3),o(85,"translate"),l(86,"div",25)(87,"label",26),d(88,"input",27)(89,"span",28),p()()(),l(90,"app-form-fields",3),o(91,"translate"),l(92,"div",25)(93,"label",26),d(94,"input",29)(95,"span",28),p()()(),l(96,"app-form-fields",3),o(97,"translate"),l(98,"div",25)(99,"label",26),d(100,"input",30)(101,"span",28),p()()(),l(102,"app-button",31),f(103),o(104,"translate"),p()()}if(s&2){let m,y,b,Le=U(62);a("formGroup",t.form),i(),a("label",n(2,95,"store_logo"))("for","logo")("required",!1),i(2),a("multipleImage",!1)("accept",te(171,Je,t.mediaConfig.image))("image",(m=n(4,97,t.store$))==null?null:m.store_logo)("helpText","*Upload image size 500x500px recommended"),i(2),a("label",n(6,99,"store_name"))("for","store_name")("required",!0),i(2),u("placeholder",n(8,101,"enter_store_name")),i(2),a("ngIf",(t.form==null?null:t.form.controls.store_name.touched)&&(t.form.controls.store_name.errors==null?null:t.form.controls.store_name.errors.required)),i(),a("label",n(11,103,"store_description"))("for","description")("required",!0),i(2),u("placeholder",n(13,105,"enter_description")),i(2),a("ngIf",t.form.controls.description.touched&&(t.form.controls.description.errors==null?null:t.form.controls.description.errors.required)),i(),a("label",n(16,107,"country"))("for","country")("required",!0),i(2),u("noResultMessage",n(18,109,"no_data_found")),a("data",(y=n(19,111,t.countries$))!=null&&y.length?n(20,113,t.countries$):k(173,$e))("placeholder",n(21,115,"select_country")),i(5),a("ngIf",(t.form==null||t.form.controls.country_id==null?null:t.form.controls.country_id.touched)&&(t.form==null||t.form.controls.country_id==null||t.form.controls.country_id.errors==null?null:t.form.controls.country_id.errors.required)),i(),a("label",n(24,117,"state"))("for","state")("required",!0),i(2),u("noResultMessage",n(26,119,"no_data_found")),a("data",(b=n(27,121,t.states$))!=null&&b.length?n(28,123,t.states$):k(174,$e))("placeholder",n(29,125,"select_state")),i(5),a("ngIf",(t.form==null?null:t.form.controls.state_id.touched)&&(t.form==null||t.form.controls.state_id.errors==null?null:t.form.controls.state_id.errors.required)),i(),a("label",n(32,127,"city"))("for","city")("required",!0),i(2),u("placeholder",n(34,129,"enter_city_name")),i(2),a("ngIf",t.form.controls.city.touched&&(t.form.controls.city.errors==null?null:t.form.controls.city.errors.required)),i(),a("label",n(37,131,"address"))("for","address")("required",!0),i(2),u("placeholder",n(39,133,"enter_store_address")),i(2),a("ngIf",t.form.controls.address.touched&&(t.form.controls.address.errors==null?null:t.form.controls.address.errors.required)),i(),a("label",n(42,135,"pincode"))("for","pincode")("required",!0),i(2),u("placeholder",n(44,137,"enter_pincode")),i(2),a("ngIf",t.form.controls.pincode.touched&&(t.form.controls.pincode.errors==null?null:t.form.controls.pincode.errors.required)),i(),a("label",n(47,139,"name"))("for","name")("required",!0),i(2),u("placeholder",n(49,141,"enter_name")),i(2),a("ngIf",(t.form==null||t.form.controls.name==null?null:t.form.controls.name.touched)&&(t.form.controls.name==null||t.form.controls.name.errors==null?null:t.form.controls.name.errors.required)),i(),a("label",n(52,143,"email_address"))("for","email")("required",!0),i(2),u("placeholder",n(54,145,"enter_email_address")),i(2),a("ngIf",(t.form==null||t.form.controls.email==null?null:t.form.controls.email.touched)&&(t.form.controls.email==null||t.form.controls.email.errors==null?null:t.form.controls.email.errors.required)),i(),a("ngIf",(t.form==null||t.form.controls.email==null?null:t.form.controls.email.touched)&&(t.form.controls.email==null||t.form.controls.email.errors==null?null:t.form.controls.email.errors.email)),i(),a("label",n(58,147,"phone"))("for","phone")("required",!0),i(2),u("noResultMessage",n(60,149,"no_data_found")),a("templates",Le)("data",t.codes),i(4),u("placeholder",n(64,151,"enter_phone")),i(2),a("ngIf",t.form.controls.phone.touched&&(t.form.controls.phone.errors==null?null:t.form.controls.phone.errors.required)),i(),a("ngIf",t.form.controls.phone.touched&&(t.form.controls.phone.errors==null?null:t.form.controls.phone.errors.pattern)),i(),a("ngIf",t.type!=="edit"),i(),a("ngIf",t.type!=="edit"),i(),a("label","FaceBook")("for","facebook"),i(),u("placeholder",n(71,153,"enter_url")),i(2),a("label","Instagram")("for","instagram"),i(),u("placeholder",n(74,155,"enter_url")),i(2),a("label","Twitter")("for","Twitter"),i(),u("placeholder",n(77,157,"enter_url")),i(2),a("label","youtube")("for","youtube"),i(),u("placeholder",n(80,159,"enter_url")),i(2),a("label","Pinterest")("for","pinterest"),i(),u("placeholder",n(83,161,"enter_url")),i(2),a("label",n(85,163,"hide_email"))("for","hide_vendor_email")("required",!1),i(6),a("label",n(91,165,"hide_phone"))("for","hide_vendor_phone")("required",!1),i(6),a("label",n(97,167,"status"))("for","status")("required",!1),i(6),a("id","store_btn"),i(),_(" ",n(104,169,t.type=="create"?"save_store":"update_store")," ")}},dependencies:[ie,ce,se,fe,pe,de,me,ue,_e,Se,we,Ie,ye,re,j]});var C=N;I([E(Ae.countries)],C.prototype,"countries$",void 0);I([E(w.selectedStore)],C.prototype,"store$",void 0);var Re=(()=>{let e=class e{};e.\u0275fac=function(m){return new(m||e)},e.\u0275cmp=g({type:e,selectors:[["app-create-store"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(m,y){m&1&&(l(0,"app-page-wrapper",0),d(1,"app-form-store",1),p()),m&2&&(a("title","add_store"),i(),a("type","create"))},dependencies:[q,C]});let r=e;return r})();var je=(()=>{let e=class e{};e.\u0275fac=function(m){return new(m||e)},e.\u0275cmp=g({type:e,selectors:[["app-edit-store"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(m,y){m&1&&(l(0,"app-page-wrapper",0),d(1,"app-form-store",1),p()),m&2&&(a("title","edit_store"),i(),a("type","edit"))},dependencies:[q,C]});let r=e;return r})();var ut=[{path:"",component:T,canActivate:[G],data:{permission:"store.index"}},{path:"create",component:Re,canActivate:[G],data:{permission:["store.index","store.create"]}},{path:"edit/:id",component:je,canActivate:[G],data:{permission:["store.index","store.edit"]}}],Ge=(()=>{let e=class e{};e.\u0275fac=function(m){return new(m||e)},e.\u0275mod=A({type:e}),e.\u0275inj=M({imports:[W.forChild(ut),W]});let r=e;return r})();var si=(()=>{let e=class e{};e.\u0275fac=function(m){return new(m||e)},e.\u0275mod=A({type:e}),e.\u0275inj=M({imports:[oe,Ge,Be,le.forFeature([w])]});let r=e;return r})();export{si as StoreModule};

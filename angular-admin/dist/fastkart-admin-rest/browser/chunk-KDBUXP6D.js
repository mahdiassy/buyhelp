import{a as E}from"./chunk-YK6OOJHV.js";import{Ec as D,a as M,k as N,l as T,lb as G,m as $,n as k,o as H,p as R,qb as A}from"./chunk-AYDE6MWJ.js";import{$ as p,Ea as j,Fa as g,Lc as _,Oc as y,Sa as C,V as b,aa as d,ab as x,bb as F,ca as l,ga as v,ha as f,jb as S,n,tc as w,xc as I}from"./chunk-RFGELG3T.js";var h=(()=>{let t=class t{constructor(o){this.payload=o}};t.type="[Commission] Get";let i=t;return i})();var P=(()=>{let t=class t{constructor(o){this.http=o}getCommissionHistory(o){return this.http.get(`${M.URL}/commissionHistory`,{params:o})}};t.\u0275fac=function(s){return new(s||t)(l(I))},t.\u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var r,a=(r=class{constructor(t){this.commissionService=t}static commission(t){return t.commission}getCommission(t,e){return this.commissionService.getCommissionHistory(e.payload).pipe(b({next:o=>{t.patchState({commission:{data:o.data,total:o?.total?o?.total:o.data?.length}})},error:o=>{throw new Error(o?.error?.message)}}))}},r.\u0275fac=function(e){return new(e||r)(l(P))},r.\u0275prov=p({token:r,factory:r.\u0275fac}),r);n([$(h)],a.prototype,"getCommission",null);n([R()],a,"commission",null);a=n([k({name:"commission",defaults:{commission:{data:[],total:0}}})],a);var m=class m{constructor(t,e){this.store=t,this.router=e,this.tableConfig={columns:[{title:"order_id",dataField:"order_id"},{title:"store_name",dataField:"store_name"},{title:"admin_commission",dataField:"admin_commission",type:"price"},{title:"vendor_commission",dataField:"vendor_commission",type:"price"},{title:"created_at",dataField:"created_at",type:"date"}],data:[],total:0}}ngOnInit(){this.commission$.subscribe(t=>{let e=t?.data?.filter(o=>(o.store_name=`<span class="text-capitalize">${o.store.store_name}</span>`,o.order_id=`<span class="fw-bolder">#${o.order.order_number}</span>`,o));this.tableConfig.data=t?e:[],this.tableConfig.total=t?t?.total:0})}onTableChange(t){this.store.dispatch(new h(t))}};m.\u0275fac=function(e){return new(e||m)(g(N),g(_))},m.\u0275cmp=v({type:m,selectors:[["app-commission"]],decls:2,vars:5,consts:[[3,"gridClass","title"],[3,"tableChanged","tableConfig","hasCheckbox","dateRange"]],template:function(e,o){e&1&&(x(0,"app-page-wrapper",0)(1,"app-table",1),S("tableChanged",function(L){return o.onTableChange(L)}),F()()),e&2&&(C("gridClass","col-sm-12")("title","commission_history"),j(),C("tableConfig",o.tableConfig)("hasCheckbox",!1)("dateRange",!0))},dependencies:[A,G]});var c=m;n([H(a.commission)],c.prototype,"commission$",void 0);var U=[{path:"",component:c,canActivate:[E],data:{permission:"commission_history.index"}}],z=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=f({type:t}),t.\u0275inj=d({imports:[y.forChild(U),y]});let i=t;return i})();var yt=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=f({type:t}),t.\u0275inj=d({imports:[w,z,D,T.forFeature([a])]});let i=t;return i})();export{yt as CommissionModule};

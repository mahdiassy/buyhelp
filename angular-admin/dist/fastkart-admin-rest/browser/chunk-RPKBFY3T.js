import{Da as $,a as p,ic as m,jc as b,k as x,kc as E,lc as L,m as g,mc as R,n as U,nc as j,oc as A,p as v,pc as I,qc as k}from"./chunk-AYDE6MWJ.js";import{$ as f,V as c,a as h,b as u,ca as d,n as i,xc as y}from"./chunk-RFGELG3T.js";var D=(()=>{let e=class e{constructor(t){this.http=t}getTags(t){return this.http.get(`${p.URL}/tag`,{params:t})}createTag(t){return this.http.post(`${p.URL}/tag`,t)}editTag(t){return this.http.get(`${p.URL}/tag/${t}`)}updateTag(t,r){return this.http.put(`${p.URL}/tag/${t}`,r)}updateTagStatus(t,r){return this.http.put(`${p.URL}/tag/${t}/${r}`,{})}deleteTag(t){return this.http.delete(`${p.URL}/tag/${t}`)}deleteAllTag(t){return this.http.post(`${p.URL}/tag/deleteAll`,{ids:t})}importTag(t){let r=new FormData;return Array.isArray(t)&&t.length&&t.forEach((o,n)=>{r.append("tags",o,o.name)}),this.http.post(`${p.URL}/tag/csv/import`,r)}exportTag(){let t={};return this.http.post(`${p.URL}/tag/csv/export`,t,{responseType:"blob"})}};e.\u0275fac=function(r){return new(r||e)(d(y))},e.\u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"});let S=e;return S})();var l,s=(l=class{constructor(e,a,t){this.store=e,this.notificationService=a,this.tagService=t}static tag(e){return e.tag}static selectedTag(e){return e.selectedTag}getTags(e,a){return this.tagService.getTags(a.payload).pipe(c({next:t=>{e.patchState({tag:{data:t.data,total:t?.total?t?.total:t.data?.length}})},error:t=>{throw new Error(t?.error?.message)}}))}create(e,a){return this.tagService.createTag(a.payload).pipe(c({next:t=>{let r=e.getState();e.patchState(u(h({},r),{tag:{data:[...r.tag.data,t],total:r?.tag.total+1}}))},complete:()=>{this.notificationService.showSuccess("Tag Created Successfully")},error:t=>{throw new Error(t?.error?.message)}}))}edit(e,{id:a}){return this.tagService.editTag(a).pipe(c({next:t=>{let r=e.getState();e.patchState(u(h({},r),{selectedTag:t}))},error:t=>{throw new Error(t?.error?.message)}}))}update(e,{payload:a,id:t}){return this.tagService.updateTag(t,a).pipe(c({next:r=>{if(typeof r=="object"){let o=e.getState(),n=[...o.tag.data],T=n.findIndex(w=>w.id===t);n[T]=r,e.patchState(u(h({},o),{tag:{data:n,total:o.tag.total}}))}},complete:()=>{this.notificationService.showSuccess("Tag Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}updateStatus(e,{id:a,status:t}){return this.tagService.updateTagStatus(a,t).pipe(c({next:r=>{if(typeof r=="object"){let o=e.getState(),n=[...o.tag.data],T=n.findIndex(w=>w.id===a);n[T]=r,e.patchState(u(h({},o),{tag:{data:n,total:o.tag.total}}))}},complete:()=>{this.notificationService.showSuccess("Tag Status Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}delete(e,{id:a}){return this.tagService.deleteTag(a).pipe(c({next:()=>{this.store.dispatch(new m({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Tag Deleted Successfully")},error:t=>{throw new Error(t?.error?.message)}}))}deleteAll(e,{ids:a}){return this.tagService.deleteAllTag(a).pipe(c({next:()=>{this.store.dispatch(new m({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Tag Deleted Successfully")},error:t=>{throw new Error(t?.error?.message)}}))}import(e,a){return this.tagService.importTag(a.payload).pipe(c({next:t=>{this.store.dispatch(new m({page:1,paginate:15}))},error:t=>{throw new Error(t?.error?.message)}}))}export(e,a){return this.tagService.exportTag().pipe(c({next:t=>{let r=new Blob([t],{type:"text/csv"}),o=window.URL.createObjectURL(r),n=document.createElement("a");n.href=o,n.download="tag.csv",n.click(),window.URL.revokeObjectURL(o)},error:t=>{throw new Error(t?.error?.message)}}))}},l.\u0275fac=function(a){return new(a||l)(d(x),d($),d(D))},l.\u0275prov=f({token:l,factory:l.\u0275fac}),l);i([g(m)],s.prototype,"getTags",null);i([g(b)],s.prototype,"create",null);i([g(E)],s.prototype,"edit",null);i([g(L)],s.prototype,"update",null);i([g(R)],s.prototype,"updateStatus",null);i([g(j)],s.prototype,"delete",null);i([g(A)],s.prototype,"deleteAll",null);i([g(I)],s.prototype,"import",null);i([g(k)],s.prototype,"export",null);i([v()],s,"tag",null);i([v()],s,"selectedTag",null);s=i([U({name:"tag",defaults:{tag:{data:[],total:0},selectedTag:null}})],s);export{s as a};

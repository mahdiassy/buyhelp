import{Da as U,a,k as x,m as u,n as $,p as C}from"./chunk-AYDE6MWJ.js";import{$ as m,V as i,a as S,b as f,ca as h,n as p,xc as v}from"./chunk-RFGELG3T.js";var y=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Coupon] Get";let o=t;return o})(),j=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Coupon] Create";let o=t;return o})(),E=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Coupon] Edit";let o=t;return o})(),b=(()=>{let t=class t{constructor(e,r){this.payload=e,this.id=r}};t.type="[Coupon] Update";let o=t;return o})(),A=(()=>{let t=class t{constructor(e,r){this.id=e,this.status=r}};t.type="[Coupon] Update Status";let o=t;return o})(),I=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Coupon] Delete";let o=t;return o})(),L=(()=>{let t=class t{constructor(e){this.ids=e}};t.type="[Coupon] Delete All";let o=t;return o})();var R=(()=>{let t=class t{constructor(e){this.http=e}getCoupons(e){return this.http.get(`${a.URL}/coupon`,{params:e})}createCoupon(e){return this.http.post(`${a.URL}/coupon`,e)}editCoupon(e){return this.http.get(`${a.URL}/coupon/${e}`)}updateCoupon(e,r){return this.http.put(`${a.URL}/coupon/${e}`,r)}updateCouponStatus(e,r){return this.http.put(`${a.URL}/coupon/${e}/${r}`,{})}deleteCoupon(e){return this.http.delete(`${a.URL}/coupon/${e}`)}deleteAllCoupon(e){return this.http.post(`${a.URL}/coupon/deleteAll`,{ids:e})}};t.\u0275fac=function(r){return new(r||t)(h(v))},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var c,s=(c=class{constructor(t,n,e){this.store=t,this.notificationService=n,this.couponService=e}static coupon(t){return t.coupon}static selectedCoupon(t){return t.selectedCoupon}static coupons(t){return t.coupon.data.map(n=>({label:n?.title,value:n?.id}))}getCoupons(t,n){return this.couponService.getCoupons(n.payload).pipe(i({next:e=>{t.patchState({coupon:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}create(t,n){return this.couponService.createCoupon(n.payload).pipe(i({next:e=>{let r=t.getState();t.patchState(f(S({},r),{coupon:{data:[...r.coupon.data,e],total:r?.coupon.total+1}}))},complete:()=>{this.notificationService.showSuccess("Coupon Created Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}edit(t,{id:n}){return this.couponService.editCoupon(n).pipe(i({next:e=>{let r=t.getState();t.patchState(f(S({},r),{selectedCoupon:e}))},error:e=>{throw new Error(e?.error?.message)}}))}update(t,{payload:n,id:e}){return this.couponService.updateCoupon(e,n).pipe(i({next:r=>{if(typeof r=="object"){let l=t.getState(),d=[...l.coupon.data],w=d.findIndex(g=>g.id===e);d[w]=r,t.patchState(f(S({},l),{coupon:{data:d,total:l.coupon.total}}))}},complete:()=>{this.notificationService.showSuccess("Coupon Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}updateStatus(t,{id:n,status:e}){return this.couponService.updateCouponStatus(n,e).pipe(i({next:r=>{if(typeof r=="object"){let l=t.getState(),d=[...l.coupon.data],w=d.findIndex(g=>g.id===n);d[w]=r,t.patchState(f(S({},l),{coupon:{data:d,total:l.coupon.total}}))}},complete:()=>{this.notificationService.showSuccess("Coupon Status Updated Successfully")},error:r=>{throw new Error(r?.error?.message)}}))}delete(t,{id:n}){return this.couponService.deleteCoupon(n).pipe(i({next:()=>{this.store.dispatch(new y({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Coupon Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}deleteAll(t,{ids:n}){return this.couponService.deleteAllCoupon(n).pipe(i({next:()=>{this.store.dispatch(new y({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Coupon Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}},c.\u0275fac=function(n){return new(n||c)(h(x),h(U),h(R))},c.\u0275prov=m({token:c,factory:c.\u0275fac}),c);p([u(y)],s.prototype,"getCoupons",null);p([u(j)],s.prototype,"create",null);p([u(E)],s.prototype,"edit",null);p([u(b)],s.prototype,"update",null);p([u(A)],s.prototype,"updateStatus",null);p([u(I)],s.prototype,"delete",null);p([u(L)],s.prototype,"deleteAll",null);p([C()],s,"coupon",null);p([C()],s,"selectedCoupon",null);p([C()],s,"coupons",null);s=p([$({name:"coupon",defaults:{coupon:{data:[],total:0},selectedCoupon:null}})],s);export{y as a,j as b,E as c,b as d,A as e,I as f,L as g,s as h};

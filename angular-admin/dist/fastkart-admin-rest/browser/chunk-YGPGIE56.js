import{a as b}from"./chunk-RPKBFY3T.js";import{a as D}from"./chunk-YK6OOJHV.js";import{A as ne,B as pe,Bc as xe,E as S,Ec as Se,G as se,K as me,N as le,S as de,Ua as ce,ab as fe,ic as he,jc as ye,k as A,kc as Ce,l as te,lb as _,lc as ve,mc as Te,nc as _e,o as ie,oc as be,qb as ue,qc as we,rb as ge,x as re,y as oe,z as ae}from"./chunk-AYDE6MWJ.js";import{Ea as o,Fa as g,Ib as X,Jc as Z,Lc as N,Mc as ee,Nb as d,Ob as c,Oc as U,Qa as x,Rc as P,S as Q,Sa as a,T as L,aa as F,ab as n,bb as m,cb as l,ga as u,gb as M,ha as V,i as G,jb as v,jc as E,kb as B,n as $,na as W,nb as q,oa as y,p as R,pa as C,rb as H,sb as z,tb as J,tc as Y,u as O,vb as h,wb as K,xb as T}from"./chunk-RFGELG3T.js";var Pe=["csvModal"],De=i=>[i];function je(i,e){if(i&1){let p=M();n(0,"a",6),v("click",function(){y(p);let t=B(2);return C(t.export())}),l(1,"i",11),h(2),d(3,"translate"),m()}i&2&&(o(2),T(" ",c(3,1,"export")," "))}function qe(i,e){if(i&1){let p=M();n(0,"div",5)(1,"a",6),v("click",function(){y(p);let t=B();return C(t.CSVModal.openModal())}),l(2,"i",7),h(3),d(4,"translate"),m(),x(5,je,4,3,"a",8),n(6,"a",9),l(7,"i",10),h(8),d(9,"translate"),m()()}if(i&2){let p=B();o(3),T(" ",c(4,4,"import")," "),o(2),a("ngIf",p.tagType=="product"),o(),a("routerLink",X(8,De,p.tagType=="post"?"/blog/tag/create":"/tag/create")),o(2),T(" ",c(9,6,"add_tag")," ")}}var w=class w{constructor(e,p){this.store=e,this.router=p,this.tagType="product",this.tableConfig={columns:[{title:"name",dataField:"name",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"tag.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"tag.destroy"}],data:[],total:0}}ngOnInit(){this.tag$.subscribe(e=>{this.tableConfig.data=e?e?.data:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){e.type=this.tagType,this.store.dispatch(new he(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="status"?this.status(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"&&this.deleteAll(e.data)}edit(e){this.tagType=="post"?this.router.navigateByUrl(`/blog/tag/edit/${e.id}`):this.router.navigateByUrl(`/tag/edit/${e.id}`)}status(e){this.store.dispatch(new Te(e.id,e.status))}delete(e){this.store.dispatch(new _e(e.id))}deleteAll(e){this.store.dispatch(new be(e))}export(){this.store.dispatch(new we)}};w.\u0275fac=function(p){return new(p||w)(g(A),g(N))},w.\u0275cmp=u({type:w,selectors:[["app-tag"]],viewQuery:function(p,r){if(p&1&&H(Pe,5),p&2){let t;z(t=J())&&(r.CSVModal=t.first)}},inputs:{tagType:"tagType"},decls:5,vars:6,consts:[["csvModal",""],[3,"gridClass","title"],["class","d-flex flex-wrap gap-2","button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],[3,"module"],["button","",1,"d-flex","flex-wrap","gap-2"],["href","javascript:void(0)",1,"align-items-center","btn","btn-outline","me-2",3,"click"],[1,"ri-upload-2-line"],["href","javascript:void(0)","class","align-items-center btn btn-outline me-2",3,"click",4,"ngIf"],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"],[1,"ri-download-2-line"]],template:function(p,r){if(p&1){let t=M();n(0,"app-page-wrapper",1),x(1,qe,10,10,"div",2),n(2,"app-table",3),v("tableChanged",function(f){return y(t),C(r.onTableChange(f))})("rowClicked",function(f){return y(t),C(r.edit(f))})("action",function(f){return y(t),C(r.onActionClicked(f))}),m()(),l(3,"app-import-csv-modal",4,0)}p&2&&(a("gridClass","col-sm-12")("title","tags"),o(),a("hasPermission","tag.create"),o(),a("tableConfig",r.tableConfig)("hasCheckbox",!0),o(),a("module","tag"))},dependencies:[E,ee,ue,_,xe,fe,P]});var I=w;$([ie(b.tag)],I.prototype,"tag$",void 0);function Ue(i,e){i&1&&(n(0,"div",10),h(1),d(2,"translate"),m()),i&2&&(o(),T(" ",c(2,1,"tag_name_is_required")," "))}var j=(()=>{let e=class e{constructor(r,t,s,f){this.store=r,this.router=t,this.route=s,this.formBuilder=f,this.tagType="product",this.destroy$=new G,this.form=this.formBuilder.group({name:new S("",[ae.required]),description:new S,type:new S(this.tagType,[]),status:new S(!0)})}ngOnChanges(){this.form.controls.type.setValue(this.tagType)}ngOnInit(){this.route.params.pipe(Q(r=>r.id?this.store.dispatch(new Ce(r.id)).pipe(O(()=>this.store.select(b.selectedTag))):R()),L(this.destroy$)).subscribe(r=>{this.tag=r,this.form.patchValue({name:this.tag?.name,description:this.tag?.description,status:this.tag?.status})})}submit(){this.form.markAllAsTouched();let r=new ye(this.form.value);this.type=="edit"&&this.tag?.id&&(r=new ve(this.form.value,this.tag.id)),this.form.valid&&this.store.dispatch(r).subscribe({complete:()=>{this.tagType=="post"?this.router.navigateByUrl("/blog/tag"):this.router.navigateByUrl("/tag")}})}};e.\u0275fac=function(t){return new(t||e)(g(A),g(N),g(Z),g(de))},e.\u0275cmp=u({type:e,selectors:[["app-form-tag"]],inputs:{type:"type",tagType:"tagType"},features:[W],decls:19,vars:27,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","name","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"]],template:function(t,s){t&1&&(n(0,"form",0),v("ngSubmit",function(){return s.submit()}),n(1,"app-form-fields",1),d(2,"translate"),l(3,"input",2),d(4,"translate"),x(5,Ue,3,3,"div",3),m(),n(6,"app-form-fields",1),d(7,"translate"),l(8,"textarea",4),d(9,"translate"),m(),n(10,"app-form-fields",1),d(11,"translate"),n(12,"div",5)(13,"label",6),l(14,"input",7)(15,"span",8),m()()(),n(16,"app-button",9),h(17),d(18,"translate"),m()()),t&2&&(a("formGroup",s.form),o(),a("label",c(2,15,"tag_name"))("for","name")("required",!0),o(2),q("placeholder",c(4,17,"enter_tag_name")),o(2),a("ngIf",s.form.controls.name.touched&&(s.form.controls.name.errors==null?null:s.form.controls.name.errors.required)),o(),a("label",c(7,19,"description"))("for","description")("required",!1),o(2),q("placeholder",c(9,21,"enter_description")),o(2),a("label",c(11,23,"status"))("for","status")("required",!1),o(6),a("id","tag_btn"),o(),K(c(18,25,s.type=="create"?"save_tag":"update_tag")))},dependencies:[E,se,oe,re,ne,pe,me,le,ge,ce,P]});let i=e;return i})();var Fe=(()=>{let e=class e{constructor(){this.tagType="product"}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u({type:e,selectors:[["app-create-tag"]],inputs:{tagType:"tagType"},decls:2,vars:3,consts:[[3,"title"],[3,"type","tagType"]],template:function(t,s){t&1&&(n(0,"app-page-wrapper",0),l(1,"app-form-tag",1),m()),t&2&&(a("title","create_tag"),o(),a("type","create")("tagType",s.tagType))},dependencies:[_,j]});let i=e;return i})();var Ve=(()=>{let e=class e{constructor(){this.tagType="product"}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u({type:e,selectors:[["app-edit-tag"]],inputs:{tagType:"tagType"},decls:2,vars:3,consts:[[3,"title"],[3,"type","tagType"]],template:function(t,s){t&1&&(n(0,"app-page-wrapper",0),l(1,"app-form-tag",1),m()),t&2&&(a("title","edit_tag"),o(),a("type","edit")("tagType",s.tagType))},dependencies:[_,j]});let i=e;return i})();var Ge=[{path:"",component:I,canActivate:[D],data:{permission:"tag.index"}},{path:"create",component:Fe,canActivate:[D],data:{permission:["tag.index","tag.create"]}},{path:"edit/:id",component:Ve,canActivate:[D],data:{permission:["tag.index","tag.edit"]}}],Me=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=V({type:e}),e.\u0275inj=F({imports:[U.forChild(Ge),U]});let i=e;return i})();var xt=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=V({type:e}),e.\u0275inj=F({imports:[Y,Me,Se,te.forFeature([b])]});let i=e;return i})();export{I as a,Fe as b,Ve as c,xt as d};

import{a as $e,b as Ve,c as je,d as Oe}from"./chunk-YJBHC5EX.js";import{a as Se,b as Fe,c as Ee,d as Me,e as Ie,f as ke,g as Ae,h as B}from"./chunk-TJ2ZHVGO.js";import{a as De,b as Ne,c as qe,d as Pe}from"./chunk-YGPGIE56.js";import{a as xe}from"./chunk-RPKBFY3T.js";import{a as We,b as Ge,c as Ue}from"./chunk-R4MOPPKG.js";import{a as h}from"./chunk-YK6OOJHV.js";import{A as ne,B as ae,E as g,Ec as Be,F as pe,Fb as be,G as le,J as se,K as me,Lb as Te,N as de,Oa as fe,S as ce,Ua as ge,ab as ue,ic as we,k as P,l as ie,lb as M,o as w,qb as ye,rb as he,tb as _e,x as oe,y as re,yb as Ce,z as U,zb as ve}from"./chunk-AYDE6MWJ.js";import{Cb as V,Db as j,Ea as n,Eb as O,Fa as C,Hb as E,Ib as W,Jc as ee,Lc as q,Mc as te,Nb as d,Ob as c,Oc as G,Qa as S,Rc as $,S as z,Sa as r,T as J,aa as D,ab as p,bb as l,cb as s,ga as m,ha as N,hc as Q,i as R,jb as u,jc as X,mc as Y,n as b,nb as F,p as K,tc as Z,u as H,vb as v,xb as T}from"./chunk-RFGELG3T.js";var nt=()=>["/blog/create"];function at(o,e){o&1&&(p(0,"div",3)(1,"a",4),s(2,"i",5),v(3),d(4,"translate"),l()()),o&2&&(n(),r("routerLink",E(4,nt)),n(2),T(" ",c(4,2,"add_blog")," "))}var I=class I{constructor(e,f){this.store=e,this.router=f,this.tableConfig={columns:[{title:"title",dataField:"title",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"blog.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"blog.destroy"},{label:"View",actionToPerform:"view",icon:"ri-eye-line"}],data:[],total:0},this.setting$.subscribe(t=>{this.url=t.general.site_url})}ngOnInit(){this.blog$.subscribe(e=>{this.tableConfig.data=e?e?.data:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new Se(e)).subscribe()}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="status"?this.status(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"?this.deleteAll(e.data):e.actionToPerform=="view"&&this.view(e.data)}edit(e){this.router.navigateByUrl(`/blog/edit/${e.id}`)}status(e){this.store.dispatch(new Ie(e.id,e.status))}delete(e){this.store.dispatch(new ke(e.id))}deleteAll(e){this.store.dispatch(new Ae(e))}view(e){window.open(this.url+"/blog/"+e.slug,"_blank")}};I.\u0275fac=function(f){return new(f||I)(C(P),C(q))},I.\u0275cmp=m({type:I,selectors:[["app-blog"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(f,t){f&1&&(p(0,"app-page-wrapper",0),S(1,at,5,5,"div",1),p(2,"app-table",2),u("tableChanged",function(a){return t.onTableChange(a)})("rowClicked",function(a){return t.edit(a)})("action",function(a){return t.onActionClicked(a)}),l()()),f&2&&(r("gridClass","col-sm-12")("title","blog"),n(),r("hasPermission","blog.create"),n(),r("tableConfig",t.tableConfig)("hasCheckbox",!0))},dependencies:[te,ye,M,ue,$]});var k=I;b([w(B.blog)],k.prototype,"blog$",void 0);b([w(fe.setting)],k.prototype,"setting$",void 0);var pt=()=>({standalone:!0}),Re=o=>[o],Ke=()=>[];function lt(o,e){o&1&&(p(0,"div",32),v(1),d(2,"translate"),l()),o&2&&(n(),T(" ",c(2,1,"title_is_required")," "))}function st(o,e){o&1&&(p(0,"div",32),v(1),d(2,"translate"),l()),o&2&&(n(),T(" ",c(2,1,"thumbnail_is_required")," "))}function mt(o,e){o&1&&(p(0,"div",32),v(1),d(2,"translate"),l()),o&2&&(n(),T(" ",c(2,1,"select_category_is_required")," "))}var A=class A{constructor(e,f,t,i){this.store=e,this.route=f,this.router=t,this.formBuilder=i,this.selectedCategories=[],this.selectedTags=[],this.mediaConfig=_e,this.textArea=new g(""),this.isCodeEditor=!0,this.html="",this.destroy$=new R,this.store.dispatch(new be({type:"post"})),this.store.dispatch(new we({type:"post"})),this.form=this.formBuilder.group({title:new g("",[U.required]),description:new g,content:new g,meta_title:new g,meta_description:new g,blog_thumbnail_id:new g("",[U.required]),blog_meta_image_id:new g(""),categories:new g,tags:new g,is_featured:new g(0),is_sticky:new g(0),status:new g(1)})}ngOnInit(){this.route.params.pipe(z(e=>e.id?this.store.dispatch(new Ee(e.id)).pipe(H(()=>this.store.select(B.selectedBlog))):K()),J(this.destroy$)).subscribe(e=>{this.id=e?.id,this.selectedCategories=e?.categories.map(f=>f?.id),this.selectedTags=e?.tags.map(f=>f?.id),this.form.patchValue({title:e?.title,description:e?.description,content:e?.content,blog_thumbnail_id:e?.blog_thumbnail_id,categories:this.selectedCategories,tags:this.selectedTags,blog_meta_image_id:e?.blog_meta_image_id,meta_title:e?.meta_title,meta_description:e?.meta_description,is_featured:e?.is_featured,is_sticky:e?.is_sticky,status:e?.status})}),this.editor=new Oe}selectThumbnail(e){Array.isArray(e)||this.form.controls.blog_thumbnail_id.setValue(e?e.id:"")}selectMetaImage(e){Array.isArray(e)||this.form.controls.blog_meta_image_id.setValue(e?e.id:null)}selectCategoryItem(e){Array.isArray(e)&&this.form.controls.categories.setValue(e)}selectTagItem(e){Array.isArray(e)&&this.form.controls.tags.setValue(e)}getText(e){this.form.controls.content.setValue(this.textArea.value)}getData(e){this.textArea.setValue(this.html)}submit(){this.form.markAllAsTouched();let e=new Fe(this.form.value);this.type=="edit"&&this.id&&(e=new Me(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/blog")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};A.\u0275fac=function(f){return new(f||A)(C(P),C(ee),C(q),C(ce))},A.\u0275cmp=m({type:A,selectors:[["app-form-blog"]],inputs:{type:"type"},decls:65,vars:100,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","title","formControlName","title",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","rows","3",1,"form-control",3,"placeholder"],[1,"custom-editor","editor-checkbox"],[1,"form-check","form-switch"],["id","ckcheck","type","checkbox","name","isCodeEditor",1,"form-check-input",3,"ngModelChange","ngModel","ngModelOptions"],["for","ckcheck",1,"cursor-pointer"],[1,"edit"],[1,"ri-edit-box-line"],[1,"code"],[1,"ri-code-s-slash-line"],[3,"ngClass"],[3,"editor"],["formControlName","content",3,"ngModelChange","editor","placeholder","ngModel"],[1,"editor-textarea",3,"ngClass"],["id","content","rows","3",1,"form-control",3,"keyup","placeholder","formControl"],[1,"mt-2"],[3,"selectedFiles","multipleImage","accept","image"],[3,"selectedItem","position","selectedOption","options","subArrayKey"],[3,"selectedItem","position","selectedOption","options"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","is_featured","formControlName","is_featured"],[1,"switch-state"],["type","checkbox","id","is_sticky","formControlName","is_sticky"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[3,"selectedFiles","accept","multipleImage","image"],["type","checkbox","id","status","formControlName","status"],[3,"id"],[1,"invalid-feedback"]],template:function(f,t){if(f&1&&(p(0,"form",0),u("ngSubmit",function(){return t.submit()}),p(1,"app-form-fields",1),s(2,"input",2),d(3,"translate"),S(4,lt,3,3,"div",3),l(),p(5,"app-form-fields",1),s(6,"textarea",4),d(7,"translate"),l(),p(8,"app-form-fields",1)(9,"div",5)(10,"div",6)(11,"input",7),O("ngModelChange",function(a){return j(t.isCodeEditor,a)||(t.isCodeEditor=a),a}),l(),p(12,"label",8)(13,"span",9),s(14,"i",10),l(),p(15,"span",11),s(16,"i",12),l()()(),p(17,"div",13),s(18,"ngx-editor-menu",14),p(19,"ngx-editor",15),O("ngModelChange",function(a){return j(t.html,a)||(t.html=a),a}),u("ngModelChange",function(a){return t.getData(a)}),l()(),p(20,"div",16)(21,"textarea",17),d(22,"translate"),u("keyup",function(a){return t.getText(a)}),l(),p(23,"p",18),v(24,"*Only accept html tags"),l()()()(),p(25,"app-form-fields",1)(26,"app-image-upload",19),d(27,"async"),u("selectedFiles",function(a){return t.selectThumbnail(a)}),l(),S(28,st,3,3,"div",3),l(),p(29,"app-form-fields",1)(30,"app-advanced-dropdown",20),d(31,"async"),d(32,"async"),u("selectedItem",function(a){return t.selectCategoryItem(a)}),l(),S(33,mt,3,3,"div",3),l(),p(34,"app-form-fields",1)(35,"app-advanced-dropdown",21),d(36,"async"),d(37,"async"),u("selectedItem",function(a){return t.selectTagItem(a)}),l()(),p(38,"app-form-fields",1)(39,"div",22)(40,"label",23),s(41,"input",24)(42,"span",25),l()()(),p(43,"app-form-fields",1)(44,"div",22)(45,"label",23),s(46,"input",26)(47,"span",25),l()()(),p(48,"app-form-fields",1),s(49,"input",27),d(50,"translate"),l(),p(51,"app-form-fields",1),s(52,"textarea",28),d(53,"translate"),l(),p(54,"app-form-fields",1)(55,"app-image-upload",29),d(56,"async"),u("selectedFiles",function(a){return t.selectMetaImage(a)}),l()(),p(57,"app-form-fields",1)(58,"div",22)(59,"label",23),s(60,"input",30)(61,"span",25),l()()(),p(62,"app-button",31),v(63),d(64,"translate"),l()()),f&2){let i,a,x,L;r("formGroup",t.form),n(),r("label","title")("for","title")("required",!0),n(),F("placeholder",c(3,69,"enter_blog_title")),n(2),r("ngIf",t.form.controls.title.touched&&(t.form.controls.title.errors==null?null:t.form.controls.title.errors.required)),n(),r("label","description")("for","desc")("required",!1),n(),F("placeholder",c(7,71,"enter_blog_description")),n(2),r("label","content")("for","content")("required",!1),n(3),V("ngModel",t.isCodeEditor),r("ngModelOptions",E(93,pt)),n(6),r("ngClass",t.isCodeEditor?"d-block":"d-none"),n(),r("editor",t.editor),n(),r("editor",t.editor)("placeholder","Type here..."),V("ngModel",t.html),n(),r("ngClass",t.isCodeEditor?"d-none":"d-block"),n(),F("placeholder",c(22,73,"enter_html_content")),r("formControl",t.textArea),n(4),r("label","thumbnail")("for","image")("required",!0),n(),r("multipleImage",!1)("accept",W(94,Re,t.mediaConfig.image))("image",(i=c(27,75,t.blog$))==null?null:i.blog_thumbnail),n(2),r("ngIf",t.form.controls.blog_thumbnail_id.touched&&(t.form.controls.blog_thumbnail_id.errors==null?null:t.form.controls.blog_thumbnail_id.errors.required)),n(),r("label","select_categories")("for","category")("required",!0),n(),r("position","top")("selectedOption",t.selectedCategories)("options",!((a=c(31,77,t.category$))==null||a.data==null)&&a.data.length?(a=c(32,79,t.category$))==null?null:a.data:E(96,Ke))("subArrayKey","subcategories"),n(3),r("ngIf",t.form.controls.categories.touched&&(t.form.controls.categories.errors==null?null:t.form.controls.categories.errors.required)),n(),r("label","select_tags")("for","tag")("required",!1),n(),r("position","top")("selectedOption",t.selectedTags)("options",!((x=c(36,81,t.tag$))==null||x.data==null)&&x.data.length?(x=c(37,83,t.tag$))==null?null:x.data:E(97,Ke)),n(3),r("label","featured")("for","is_featured")("required",!1),n(5),r("label","sticky")("for","is_sticky")("required",!1),n(5),r("label","meta_title")("for","meta_title")("required",!1),n(),F("placeholder",c(50,85,"enter_meta_title")),n(2),r("label","meta_description")("for","meta_description")("required",!1),n(),F("placeholder",c(53,87,"enter_meta_description")),n(2),r("label","meta_image")("for","meta_image")("required",!1),n(),r("accept",W(98,Re,t.mediaConfig.image))("multipleImage",!1)("image",(L=c(56,89,t.blog$))==null?null:L.blog_meta_image),n(2),r("label","status")("for","status")("required",!1),n(5),r("id","blog_btn"),n(),T(" ",c(64,91,t.type=="create"?"save_blog":"update_blog")," ")}},dependencies:[Q,X,le,re,oe,ne,ae,se,me,de,pe,he,Ce,ve,ge,$e,Ve,Y,$]});var _=A;b([w(B.selectedBlog)],_.prototype,"blog$",void 0);b([w(Te.category)],_.prototype,"category$",void 0);b([w(xe.tag)],_.prototype,"tag$",void 0);var ze=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=m({type:e,selectors:[["app-create-blog"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,a){i&1&&(p(0,"app-page-wrapper",0),s(1,"app-form-blog",1),l()),i&2&&(r("title","create_blog"),n(),r("type","create"))},dependencies:[M,_]});let o=e;return o})();var Je=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=m({type:e,selectors:[["app-edit-blog"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(i,a){i&1&&(p(0,"app-page-wrapper",0),s(1,"app-form-blog",1),l()),i&2&&(r("title","edit_blog"),n(),r("type","edit"))},dependencies:[M,_]});let o=e;return o})();var Qe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=m({type:e,selectors:[["app-blog-category"]],decls:1,vars:1,consts:[[3,"categoryType"]],template:function(i,a){i&1&&s(0,"app-category",0),i&2&&r("categoryType","post")},dependencies:[We]});let o=e;return o})();var Xe=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=m({type:e,selectors:[["app-edit-blog-category"]],decls:1,vars:1,consts:[[3,"categoryType"]],template:function(i,a){i&1&&s(0,"app-edit-category",0),i&2&&r("categoryType","post")},dependencies:[Ge]});let o=e;return o})();var Ye=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=m({type:e,selectors:[["app-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(i,a){i&1&&s(0,"app-tag",0),i&2&&r("tagType","post")},dependencies:[De]});let o=e;return o})();var Ze=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=m({type:e,selectors:[["app-create-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(i,a){i&1&&s(0,"app-create-tag",0),i&2&&r("tagType","post")},dependencies:[Ne]});let o=e;return o})();var et=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=m({type:e,selectors:[["app-edit-blog-tag"]],decls:1,vars:1,consts:[[3,"tagType"]],template:function(i,a){i&1&&s(0,"app-edit-tag",0),i&2&&r("tagType","post")},dependencies:[qe]});let o=e;return o})();var dt=[{path:"",component:k,canActivate:[h],data:{permission:"blog.index"}},{path:"create",component:ze,canActivate:[h],data:{permission:["blog.index","blog.create"]}},{path:"edit/:id",component:Je,canActivate:[h],data:{permission:["blog.index","blog.edit"]}},{path:"category",component:Qe,canActivate:[h],data:{permission:["category.index"]}},{path:"category/edit/:id",component:Xe,canActivate:[h],data:{permission:["category.index","category.create"]}},{path:"tag",component:Ye,canActivate:[h],data:{permission:["tag.index"]}},{path:"tag/create",component:Ze,canActivate:[h],data:{permission:["tag.create"]}},{path:"tag/edit/:id",component:et,canActivate:[h],data:{permission:["tag.edit"]}}],tt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=N({type:e}),e.\u0275inj=D({imports:[G.forChild(dt),G]});let o=e;return o})();var qi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=N({type:e}),e.\u0275inj=D({imports:[Z,tt,Be,Ue,Pe,ie.forFeature([B]),je]});let o=e;return o})();export{qi as BlogModule};

import{Da as U,a as u,k as x,m as p,n as $,p as m}from"./chunk-AYDE6MWJ.js";import{$ as f,V as a,a as h,b as S,ca as d,n as i,xc as v}from"./chunk-RFGELG3T.js";var C=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Currency] Get";let r=t;return r})(),j=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Currency] Create";let r=t;return r})(),E=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Currency] Edit";let r=t;return r})(),b=(()=>{let t=class t{constructor(e,c){this.payload=e,this.id=c}};t.type="[Currency] Update";let r=t;return r})(),A=(()=>{let t=class t{constructor(e,c){this.id=e,this.status=c}};t.type="[Currency] Update Status";let r=t;return r})(),I=(()=>{let t=class t{constructor(e){this.id=e}};t.type="[Currency] Delete";let r=t;return r})(),L=(()=>{let t=class t{constructor(e){this.ids=e}};t.type="[Currency] Delete All";let r=t;return r})();var R=(()=>{let t=class t{constructor(e){this.http=e}getCurrencies(e){return this.http.get(`${u.URL}/currency`,{params:e})}createCurrency(e){return this.http.post(`${u.URL}/currency`,e)}editCurrency(e){return this.http.get(`${u.URL}/currency/${e}`)}updateCurrency(e,c){return this.http.put(`${u.URL}/currency/${e}`,c)}updateCurrencyStatus(e,c){return this.http.put(`${u.URL}/currency/${e}/${c}`,{})}deleteCurrency(e){return this.http.delete(`${u.URL}/currency/${e}`)}deleteAllCurrency(e){return this.http.post(`${u.URL}/currency/deleteAll`,{ids:e})}};t.\u0275fac=function(c){return new(c||t)(d(v))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();var s,o=(s=class{constructor(t,n,e){this.store=t,this.notificationService=n,this.currencyService=e}static currency(t){return t.currency}static currencies(t){return t.currency.data.map(n=>({label:n?.code,value:n?.id}))}static selectedCurrency(t){return t.selectedCurrency}getCurrencies(t,n){return this.currencyService.getCurrencies(n.payload).pipe(a({next:e=>{t.patchState({currency:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}create(t,n){return this.currencyService.createCurrency(n.payload).pipe(a({next:e=>{let c=t.getState();t.patchState(S(h({},c),{currency:{data:[...c.currency.data,e],total:c?.currency.total+1}}))},complete:()=>{this.notificationService.showSuccess("Currency Created Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}edit(t,{id:n}){return this.currencyService.editCurrency(n).pipe(a({next:e=>{let c=t.getState();t.patchState(S(h({},c),{selectedCurrency:e}))},error:e=>{throw new Error(e?.error?.message)}}))}update(t,{payload:n,id:e}){return this.currencyService.updateCurrency(e,n).pipe(a({next:c=>{if(typeof c=="object"){let l=t.getState(),y=[...l.currency.data],w=y.findIndex(g=>g.id===e);y[w]=c,t.patchState(S(h({},l),{currency:{data:y,total:l.currency.total}}))}},complete:()=>{this.notificationService.showSuccess("Currency Updated Successfully")},error:c=>{throw new Error(c?.error?.message)}}))}updateStatus(t,{id:n,status:e}){return this.currencyService.updateCurrencyStatus(n,e).pipe(a({next:c=>{if(typeof c=="object"){let l=t.getState(),y=[...l.currency.data],w=y.findIndex(g=>g.id===n);y[w]=c,t.patchState(S(h({},l),{currency:{data:y,total:l.currency.total}}))}},complete:()=>{this.notificationService.showSuccess("Currency Status Updated Successfully")},error:c=>{throw new Error(c?.error?.message)}}))}delete(t,{id:n}){return this.currencyService.deleteCurrency(n).pipe(a({next:()=>{this.store.dispatch(new C({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Currency Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}deleteAll(t,{ids:n}){return this.currencyService.deleteAllCurrency(n).pipe(a({next:()=>{this.store.dispatch(new C({page:1,paginate:15}))},complete:()=>{this.notificationService.showSuccess("Currency Deleted Successfully")},error:e=>{throw new Error(e?.error?.message)}}))}},s.\u0275fac=function(n){return new(n||s)(d(x),d(U),d(R))},s.\u0275prov=f({token:s,factory:s.\u0275fac}),s);i([p(C)],o.prototype,"getCurrencies",null);i([p(j)],o.prototype,"create",null);i([p(E)],o.prototype,"edit",null);i([p(b)],o.prototype,"update",null);i([p(A)],o.prototype,"updateStatus",null);i([p(I)],o.prototype,"delete",null);i([p(L)],o.prototype,"deleteAll",null);i([m()],o,"currency",null);i([m()],o,"currencies",null);i([m()],o,"selectedCurrency",null);o=i([$({name:"currency",defaults:{currency:{data:[],total:0},selectedCurrency:null}})],o);export{C as a,j as b,E as c,b as d,A as e,I as f,L as g,o as h};

import{a as E}from"./chunk-EH2XKO42.js";import"./chunk-X62LHEF6.js";import{a as Ve,b as Ne}from"./chunk-KFHQ6TSR.js";import{a as Ae,h as G}from"./chunk-6FSDMVQO.js";import{a as Q}from"./chunk-YK6OOJHV.js";import{A as ce,B as fe,Bc as Me,E as h,Ec as ke,G as ue,H as _e,K as he,N as ve,Ob as Ie,Pb as Se,Qb as Ue,Rb as Ee,S as Ce,Sb as Fe,Tb as Te,Ua as ye,Ub as qe,Wb as Be,ab as ge,fb as we,k as R,l as le,lb as U,o as j,qb as be,rb as xe,x as me,y as de,z as _}from"./chunk-AYDE6MWJ.js";import{Ea as r,Fa as g,Hb as P,Jc as pe,Lc as D,Mc as se,Nb as l,Ob as m,Oc as H,Qa as u,Rb as W,Rc as $,S as Y,Sa as n,T as Z,Xa as ee,aa as N,ab as p,bb as s,cb as d,ga as v,gb as B,ha as A,i as J,jb as S,jc as oe,kb as x,mc as ne,n as V,nb as w,oa as C,p as z,pa as y,rb as te,sb as ie,tb as re,tc as ae,u as K,ub as L,v as X,vb as c,wb as O,xb as f}from"./chunk-RFGELG3T.js";var Oe=["csvModal"],We=()=>["/user/create"];function He(t,e){if(t&1){let o=B();p(0,"div",5)(1,"a",6),S("click",function(){C(o);let a=x();return y(a.CSVModal.openModal())}),d(2,"i",7),c(3),l(4,"translate"),s(),p(5,"a",6),S("click",function(){C(o);let a=x();return y(a.export())}),d(6,"i",8),c(7),l(8,"translate"),s(),p(9,"a",9),d(10,"i",10),c(11),l(12,"translate"),s()()}t&2&&(r(3),f(" ",m(4,4,"import")," "),r(4),f(" ",m(8,6,"export")," "),r(2),n("routerLink",P(10,We)),r(2),f(" ",m(12,8,"add_user")," "))}var F=class F{constructor(e,o){this.store=e,this.router=o,this.tableConfig={columns:[{title:"avatar",dataField:"profile_image",class:"tbl-image rounded-circle",type:"image"},{title:"name",dataField:"name",sortable:!0,sort_direction:"desc"},{title:"email",dataField:"email"},{title:"role",dataField:"role_name"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"user.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"user.destroy"}],data:[],total:0}}ngOnInit(){this.user$.subscribe(e=>{let o=e?.data?.filter(i=>(i.role_name=i?.role?.name,i));this.tableConfig.data=e?o:[],this.tableConfig.total=e?e.total:0})}onTableChange(e){this.store.dispatch(new Ie(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="status"?this.status(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"&&this.deleteAll(e.data)}edit(e){this.router.navigateByUrl(`/user/edit/${e.id}`)}status(e){this.store.dispatch(new Fe(e.id,e.status))}delete(e){this.store.dispatch(new Te(e.id))}deleteAll(e){this.store.dispatch(new qe(e))}export(){this.store.dispatch(new Be)}};F.\u0275fac=function(o){return new(o||F)(g(R),g(D))},F.\u0275cmp=v({type:F,selectors:[["app-user"]],viewQuery:function(o,i){if(o&1&&te(Oe,5),o&2){let a;ie(a=re())&&(i.CSVModal=a.first)}},decls:5,vars:6,consts:[["csvModal",""],[3,"gridClass","title"],["class","d-flex flex-wrap gap-2","button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],[3,"module"],["button","",1,"d-flex","flex-wrap","gap-2"],["href","javascript:void(0)",1,"align-items-center","btn","btn-outline","me-2",3,"click"],[1,"ri-upload-2-line"],[1,"ri-download-2-line"],[1,"align-items-center","btn","btn-theme",3,"routerLink"],[1,"ri-add-line"]],template:function(o,i){if(o&1){let a=B();p(0,"app-page-wrapper",1),u(1,He,13,11,"div",2),p(2,"app-table",3),S("tableChanged",function(q){return C(a),y(i.onTableChange(q))})("rowClicked",function(q){return C(a),y(i.edit(q))})("action",function(q){return C(a),y(i.onActionClicked(q))}),s()(),d(3,"app-import-csv-modal",4,0)}o&2&&(n("gridClass","col-sm-12")("title","users"),r(),n("hasPermission","user.create"),r(),n("tableConfig",i.tableConfig)("hasCheckbox",!0),r(),n("module","user"))},dependencies:[se,be,U,Me,ge,$]});var M=F;V([j(E.user)],M.prototype,"user$",void 0);var Je=()=>[];function ze(t,e){t&1&&(p(0,"div",17),c(1),l(2,"translate"),s()),t&2&&(r(),f(" ",m(2,1,"name_is_required")," "))}function Ke(t,e){t&1&&(p(0,"div",17),c(1),l(2,"translate"),s()),t&2&&(r(),f(" ",m(2,1,"email_is_required")," "))}function Xe(t,e){t&1&&(p(0,"div",17),c(1),l(2,"translate"),s()),t&2&&(r(),f(" ",m(2,1,"enter_valid_email")," "))}function Ye(t,e){if(t&1&&(p(0,"div",18)(1,"div",19),d(2,"div"),s(),p(3,"span",20),c(4),s()()),t&2){let o=e.data;r(2),ee("iti-flag ",o==null?null:o.class,""),r(2),O(o.code)}}function Ze(t,e){t&1&&(p(0,"div",21),c(1),l(2,"translate"),s()),t&2&&(r(),f(" ",m(2,1,"phone_number_is_required")," "))}function et(t,e){t&1&&(p(0,"div",17),c(1),l(2,"translate"),s()),t&2&&(r(),f(" ",m(2,1,"phone_number_is_invalid")," "))}function tt(t,e){t&1&&(p(0,"div",21),c(1),l(2,"translate"),s()),t&2&&(r(),f(" ",m(2,1,"password_is_required")," "))}function it(t,e){if(t&1&&(p(0,"app-form-fields",3),d(1,"input",22),l(2,"translate"),u(3,tt,3,3,"div",9),s()),t&2){let o=x();n("label","password")("for","password")("required",!0),r(),w("placeholder",m(2,5,"enter_password")),r(2),n("ngIf",o.form.controls.password.touched&&(o.form.controls.password.errors==null?null:o.form.controls.password.errors.required))}}function rt(t,e){t&1&&(p(0,"div",21),c(1),l(2,"translate"),s()),t&2&&(r(),f(" ",m(2,1,"confirm_password_is_required")," "))}function ot(t,e){t&1&&(p(0,"div",17),c(1),l(2,"translate"),s()),t&2&&(r(),f(" ",m(2,1,"confirm_password_does_not_matched")," "))}function nt(t,e){if(t&1&&u(0,ot,3,3,"div",5),t&2){let o=x(2);n("ngIf",o.passwordMatchError)}}function at(t,e){if(t&1&&(p(0,"app-form-fields",3),d(1,"input",23),l(2,"translate"),u(3,rt,3,3,"div",24)(4,nt,1,1,"ng-template",null,1,W),s()),t&2){let o=L(5),i=x();n("label","confirm_password")("for","password_confirmation")("required",!0),r(),w("placeholder",m(2,6,"enter_confirm_password")),r(2),n("ngIf",i.form.controls.password_confirmation.touched&&(i.form.controls.password_confirmation.errors==null?null:i.form.controls.password_confirmation.errors.required))("ngIfElse",o)}}function pt(t,e){t&1&&(p(0,"div",17),c(1),l(2,"translate"),s()),t&2&&(r(),f(" ",m(2,1,"role_is_required")," "))}var T=class T{constructor(e,o,i,a){this.store=e,this.route=o,this.router=i,this.formBuilder=a,this.codes=Ne,this.destroy$=new J,this.form=this.formBuilder.group({name:new h("",[_.required]),email:new h("",[_.required,_.email]),phone:new h("",[_.required,_.pattern(/^[0-9]*$/)]),country_code:new h("91",[_.required]),role_id:new h("",[_.required]),password:new h("",[_.required]),password_confirmation:new h("",[_.required]),status:new h(1)},{validator:Ve.MatchValidator("password","password_confirmation")})}get passwordMatchError(){return this.form.getError("mismatch")&&this.form.get("password_confirmation")?.touched}ngOnInit(){let e=this.store.dispatch(new Ae);this.route.params.pipe(Y(o=>o.id?this.store.dispatch(new Ue(o.id)).pipe(K(()=>this.store.select(E.selectedUser))):z()),Z(this.destroy$)).subscribe(o=>{this.id=o?.id,X([e]).subscribe({complete:()=>{this.form.patchValue({name:o?.name,email:o?.email,phone:o?.phone,country_code:o?.country_code,role_id:o?.role?o?.role.id:null,status:o?.status})}})})}submit(){this.form.markAllAsTouched();let e=new Se(this.form.value);this.type=="edit"&&this.id&&(this.form.removeControl("password"),this.form.removeControl("password_confirmation"),e=new Ee(this.form.value,this.id)),this.form.valid&&this.store.dispatch(e).subscribe({complete:()=>{this.router.navigateByUrl("/user")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};T.\u0275fac=function(o){return new(o||T)(g(R),g(pe),g(D),g(Ce))},T.\u0275cmp=v({type:T,selectors:[["app-form-user"]],inputs:{type:"type"},decls:36,vars:54,consts:[["template",""],["error",""],[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","name","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],["type","email","name","email","formControlName","email",1,"form-control",3,"placeholder"],["formControlName","country_code",1,"custom-select","intl-tel-input",3,"templates","data","noResultMessage"],["type","number","formControlName","phone","name","phone",1,"form-control","intl-input-padding",3,"placeholder"],["class","invalid-feedback","autocomplete","false",4,"ngIf"],[3,"label","for","required",4,"ngIf"],["formControlName","role_id",1,"custom-select",3,"data","placeholder","noResultMessage"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"],[1,"country"],[1,"flag-box"],[1,"dial-code"],["autocomplete","false",1,"invalid-feedback"],["type","password","name","password","formControlName","password",1,"form-control",3,"placeholder"],["type","password","name","password_confirmation","formControlName","password_confirmation",1,"form-control",3,"placeholder"],["class","invalid-feedback","autocomplete","false",4,"ngIf","ngIfElse"]],template:function(o,i){if(o&1){let a=B();p(0,"form",2),S("ngSubmit",function(){return C(a),y(i.submit())}),p(1,"app-form-fields",3),d(2,"input",4),l(3,"translate"),u(4,ze,3,3,"div",5),s(),p(5,"app-form-fields",3),d(6,"input",6),l(7,"translate"),u(8,Ke,3,3,"div",5)(9,Xe,3,3,"div",5),s(),p(10,"app-form-fields",3)(11,"select2",7),l(12,"translate"),u(13,Ye,5,4,"ng-template",null,0,W),s(),d(15,"input",8),l(16,"translate"),u(17,Ze,3,3,"div",9)(18,et,3,3,"div",5),s(),u(19,it,4,7,"app-form-fields",10)(20,at,6,8,"app-form-fields",10),p(21,"app-form-fields",3),d(22,"select2",11),l(23,"translate"),l(24,"async"),l(25,"async"),l(26,"translate"),u(27,pt,3,3,"div",5),s(),p(28,"app-form-fields",3)(29,"div",12)(30,"label",13),d(31,"input",14)(32,"span",15),s()()(),p(33,"app-button",16),c(34),l(35,"translate"),s()()}if(o&2){let a,b=L(14);n("formGroup",i.form),r(),n("label","name")("for","name")("required",!0),r(),w("placeholder",m(3,35,"enter_full_name")),r(2),n("ngIf",i.form.controls.name.touched&&(i.form.controls.name.errors==null?null:i.form.controls.name.errors.required)),r(),n("label","email")("for","email")("required",!0),r(),w("placeholder",m(7,37,"enter_email")),r(2),n("ngIf",i.form.controls.email.touched&&(i.form.controls.email.errors==null?null:i.form.controls.email.errors.required)),r(),n("ngIf",i.form.controls.email.touched&&(i.form.controls.email.errors==null?null:i.form.controls.email.errors.email)),r(),n("label","phone")("for","phone")("required",!0),r(),w("noResultMessage",m(12,39,"no_data_found")),n("templates",b)("data",i.codes),r(4),w("placeholder",m(16,41,"enter_phone")),r(2),n("ngIf",i.form.controls.phone.touched&&(i.form.controls.phone.errors==null?null:i.form.controls.phone.errors.required)),r(),n("ngIf",i.form.controls.phone.touched&&(i.form.controls.phone.errors==null?null:i.form.controls.phone.errors.pattern)),r(),n("ngIf",i.type!="edit"),r(),n("ngIf",i.type!="edit"),r(),n("label","role")("for","role")("required",!0),r(),w("noResultMessage",m(23,43,"no_data_found")),n("data",(a=m(24,45,i.role$))!=null&&a.length?m(25,47,i.role$):P(53,Je))("placeholder",m(26,49,"select_role")),r(5),n("ngIf",i.form.controls.role_id.touched&&(i.form.controls.role_id.errors==null?null:i.form.controls.role_id.errors.required)),r(),n("label","status")("for","status")("required",!1),r(5),n("id","user_btn"),r(),O(m(35,51,i.type=="create"?"save_user":"update_user"))}},dependencies:[oe,ue,de,_e,me,ce,fe,he,ve,we,xe,ye,ne,$]});var I=T;V([j(G.roles)],I.prototype,"role$",void 0);var Re=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=v({type:e,selectors:[["app-create-user"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(a,b){a&1&&(p(0,"app-page-wrapper",0),d(1,"app-form-user",1),s()),a&2&&(n("title","add_user"),r(),n("type","create"))},dependencies:[U,I]});let t=e;return t})();var je=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=v({type:e,selectors:[["app-edit-user"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(a,b){a&1&&(p(0,"app-page-wrapper",0),d(1,"app-form-user",1),s()),a&2&&(n("title","edit_user"),r(),n("type","edit"))},dependencies:[U,I]});let t=e;return t})();var st=[{path:"",component:M,canActivate:[Q],data:{permission:"user.index"}},{path:"create",component:Re,canActivate:[Q],data:{permission:["user.index","user.create"]}},{path:"edit/:id",component:je,canActivate:[Q],data:{permission:["user.index","user.edit"]}}],$e=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=A({type:e}),e.\u0275inj=N({imports:[H.forChild(st),H]});let t=e;return t})();var ti=(()=>{let e=class e{};e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=A({type:e}),e.\u0275inj=N({imports:[ae,$e,ke,le.forFeature([E,G])]});let t=e;return t})();export{ti as UserModule};

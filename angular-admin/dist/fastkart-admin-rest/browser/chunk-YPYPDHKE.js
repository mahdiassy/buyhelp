import{a as P}from"./chunk-YK6OOJHV.js";import{Ec as E,a as F,k as M,l as N,lb as A,m as T,n as k,o as G,p as $,qb as D}from"./chunk-AYDE6MWJ.js";import{$ as m,Ea as S,Fa as v,Oc as g,Sa as h,V as C,aa as l,ab as j,bb as x,ca as f,ga as y,ha as d,jb as w,n,tc as I,xc as L}from"./chunk-RFGELG3T.js";var u=(()=>{let t=class t{constructor(e){this.payload=e}};t.type="[Subscription] Get";let i=t;return i})();var H=(()=>{let t=class t{constructor(e){this.http=e}getSubscribeList(e){return this.http.get(`${F.URL}/subscribe`,{params:e})}};t.\u0275fac=function(s){return new(s||t)(f(L))},t.\u0275prov=m({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var o,a=(o=class{constructor(t){this.subscriptionService=t}static subscribeList(t){return t.subscription}getSubscribeList(t,r){return this.subscriptionService.getSubscribeList(r.payload).pipe(C({next:e=>{t.patchState({subscription:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}},o.\u0275fac=function(r){return new(r||o)(f(H))},o.\u0275prov=m({token:o,factory:o.\u0275fac}),o);n([T(u)],a.prototype,"getSubscribeList",null);n([$()],a,"subscribeList",null);a=n([k({name:"subscription",defaults:{subscription:{data:[],total:0}}})],a);var c=class c{constructor(t){this.store=t,this.tableConfig={columns:[{title:"email",dataField:"email",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"}],data:[],total:0}}ngOnInit(){this.subscribe$.subscribe(t=>{this.tableConfig.data=t?t?.data:[],this.tableConfig.total=t?t?.total:0})}onTableChange(t){this.store.dispatch(new u(t))}};c.\u0275fac=function(r){return new(r||c)(v(M))},c.\u0275cmp=y({type:c,selectors:[["app-subscription"]],decls:2,vars:4,consts:[[3,"gridClass","title"],[3,"tableChanged","tableConfig","hasCheckbox"]],template:function(r,e){r&1&&(j(0,"app-page-wrapper",0)(1,"app-table",1),w("tableChanged",function(R){return e.onTableChange(R)}),x()()),r&2&&(h("gridClass","col-sm-12")("title","subscriber"),S(),h("tableConfig",e.tableConfig)("hasCheckbox",!0))},dependencies:[D,A]});var p=c;n([G(a.subscribeList)],p.prototype,"subscribe$",void 0);var W=[{path:"",component:p,canActivate:[P],data:{permission:"subscribe.index"}}],O=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=d({type:t}),t.\u0275inj=l({imports:[g.forChild(W),g]});let i=t;return i})();var ht=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=d({type:t}),t.\u0275inj=l({imports:[I,O,E,N.forFeature([a])]});let i=t;return i})();export{ht as SubscriptionModule};

import{a as fe,b as ue,c as be,d as he,e as _e,f as ge,g as Ce,h as g}from"./chunk-A5MR6RIS.js";import{a as D}from"./chunk-YK6OOJHV.js";import{A as ee,B as te,E as u,Ec as ce,G as ie,K as re,N as ae,S as ne,Ua as oe,ab as me,k as N,l as K,lb as _,o as Q,qb as pe,rb as de,tb as se,x as X,y as Y,yb as le,z as Z}from"./chunk-AYDE6MWJ.js";import{Ea as a,Fa as f,Hb as W,Ib as E,Jc as z,Lc as M,Mc as J,Nb as s,Ob as l,Oc as q,Qa as A,Rc as P,S as R,Sa as n,T as L,aa as I,ab as m,bb as p,cb as d,ga as c,ha as T,i as V,jb as b,jc as O,n as G,nb as k,p as U,tc as H,u as $,vb as B,xb as F}from"./chunk-RFGELG3T.js";var Ae=()=>["/brand/create"];function ke(r,e){r&1&&(m(0,"div",3)(1,"a",4),d(2,"i",5),B(3),s(4,"translate"),p()()),r&2&&(a(),n("routerLink",W(4,Ae)),a(2),F(" ",l(4,2,"add_brand")," "))}var C=class C{constructor(e,h){this.store=e,this.router=h,this.tableConfig={columns:[{title:"Name",dataField:"name",sortable:!0,sort_direction:"desc"},{title:"created_at",dataField:"created_at",type:"date",sortable:!0,sort_direction:"desc"},{title:"status",dataField:"status",type:"switch"}],rowActions:[{label:"Edit",actionToPerform:"edit",icon:"ri-pencil-line",permission:"brand.edit"},{label:"Delete",actionToPerform:"delete",icon:"ri-delete-bin-line",permission:"brand.destroy"}],data:[],total:0}}ngOnInit(){this.brand$.subscribe(e=>{this.tableConfig.data=e?e?.data:[],this.tableConfig.total=e?e?.total:0})}onTableChange(e){this.store.dispatch(new fe(e))}onActionClicked(e){e.actionToPerform=="edit"?this.edit(e.data):e.actionToPerform=="status"?this.status(e.data):e.actionToPerform=="delete"?this.delete(e.data):e.actionToPerform=="deleteAll"&&this.deleteAll(e.data)}edit(e){this.router.navigateByUrl(`/brand/edit/${e.id}`)}status(e){this.store.dispatch(new _e(e.id,e.status))}delete(e){this.store.dispatch(new ge(e.id))}deleteAll(e){this.store.dispatch(new Ce(e))}};C.\u0275fac=function(h){return new(h||C)(f(N),f(M))},C.\u0275cmp=c({type:C,selectors:[["app-brand"]],decls:3,vars:5,consts:[[3,"gridClass","title"],["button","",4,"hasPermission"],[3,"tableChanged","rowClicked","action","tableConfig","hasCheckbox"],["button",""],[1,"align-items-center","btn","btn-theme","d-flex",3,"routerLink"],[1,"ri-add-line"]],template:function(h,t){h&1&&(m(0,"app-page-wrapper",0),A(1,ke,5,5,"div",1),m(2,"app-table",2),b("tableChanged",function(i){return t.onTableChange(i)})("rowClicked",function(i){return t.edit(i)})("action",function(i){return t.onActionClicked(i)}),p()()),h&2&&(n("gridClass","col-sm-12")("title","brands"),a(),n("hasPermission","brand.create"),a(),n("tableConfig",t.tableConfig)("hasCheckbox",!0))},dependencies:[J,pe,_,me,P]});var w=C;G([Q(g.brand)],w.prototype,"brand$",void 0);var x=r=>[r];function Ee(r,e){r&1&&(m(0,"div",12),B(1),s(2,"translate"),p()),r&2&&(a(),F(" ",l(2,1,"name_is_required")," "))}var j=(()=>{let e=class e{constructor(t,o,i,v){this.store=t,this.router=o,this.route=i,this.formBuilder=v,this.mediaConfig=se,this.destroy$=new V,this.form=this.formBuilder.group({name:new u("",[Z.required]),brand_image_id:new u,status:new u(!0),brand_banner_id:new u,brand_meta_image_id:new u,meta_title:new u,meta_description:new u})}ngOnInit(){this.route.params.pipe(R(t=>t.id?this.store.dispatch(new be(t.id)).pipe($(()=>this.store.select(g.selectedBrand))):U()),L(this.destroy$)).subscribe(t=>{this.brand=t,this.form.patchValue({name:this.brand?.name,brand_image_id:this.brand?.brand_image_id,brand_meta_image_id:this.brand?.brand_meta_image_id,meta_title:this.brand?.meta_title,brand_banner_id:this.brand?.brand_banner_id,meta_description:this.brand?.meta_description,status:this.brand?.status})})}selectBrandImage(t){Array.isArray(t)||this.form.controls.brand_image_id.setValue(t?t.id:"")}selectBannerImage(t){Array.isArray(t)||this.form.controls.brand_banner_id.setValue(t?t.id:"")}selectMetaImage(t){Array.isArray(t)||this.form.controls.brand_meta_image_id.setValue(t?t.id:"")}submit(){this.form.markAllAsTouched();let t=new ue(this.form.value);this.type=="edit"&&this.brand?.id&&(t=new he(this.form.value,this.brand.id)),this.form.valid&&this.store.dispatch(t).subscribe({complete:()=>{this.router.navigateByUrl("/brand")}})}};e.\u0275fac=function(o){return new(o||e)(f(N),f(M),f(z),f(ne))},e.\u0275cmp=c({type:e,selectors:[["app-form-brand"]],inputs:{type:"type"},decls:28,vars:57,consts:[[1,"theme-form","theme-form-2","mega-form",3,"ngSubmit","formGroup"],[3,"label","for","required"],["type","text","name","name","formControlName","name",1,"form-control",3,"placeholder"],["class","invalid-feedback",4,"ngIf"],[3,"selectedFiles","accept","multipleImage","image"],["type","text","formControlName","meta_title",1,"form-control",3,"placeholder"],["formControlName","meta_description","rows","3",1,"form-control",3,"placeholder"],[1,"form-check","form-switch","ps-0"],[1,"switch"],["type","checkbox","id","status","formControlName","status"],[1,"switch-state"],[3,"id"],[1,"invalid-feedback"]],template:function(o,i){o&1&&(m(0,"form",0),b("ngSubmit",function(){return i.submit()}),m(1,"app-form-fields",1),d(2,"input",2),s(3,"translate"),A(4,Ee,3,3,"div",3),p(),m(5,"app-form-fields",1),s(6,"translate"),m(7,"app-image-upload",4),b("selectedFiles",function(y){return i.selectBrandImage(y)}),p()(),m(8,"app-form-fields",1),s(9,"translate"),m(10,"app-image-upload",4),b("selectedFiles",function(y){return i.selectBannerImage(y)}),p()(),m(11,"app-form-fields",1),d(12,"input",5),s(13,"translate"),p(),m(14,"app-form-fields",1),d(15,"textarea",6),s(16,"translate"),p(),m(17,"app-form-fields",1),s(18,"translate"),m(19,"app-image-upload",4),b("selectedFiles",function(y){return i.selectMetaImage(y)}),p()(),m(20,"app-form-fields",1)(21,"div",7)(22,"label",8),d(23,"input",9)(24,"span",10),p()()(),m(25,"app-button",11),B(26),s(27,"translate"),p()()),o&2&&(n("formGroup",i.form),a(),n("label","name")("for","name")("required",!0),a(),k("placeholder",l(3,37,"enter_name")),a(2),n("ngIf",i.form.controls.name.touched&&(i.form.controls.name.errors==null?null:i.form.controls.name.errors.required)),a(),n("label",l(6,39,"image"))("for","image")("required",!1),a(2),n("accept",E(51,x,i.mediaConfig.image))("multipleImage",!1)("image",i.brand==null?null:i.brand.brand_image),a(),n("label",l(9,41,"banner_image"))("for","banner_image")("required",!1),a(2),n("accept",E(53,x,i.mediaConfig.image))("multipleImage",!1)("image",i.brand==null?null:i.brand.brand_banner),a(),n("label","meta_title")("for","metatitle")("required",!1),a(),k("placeholder",l(13,43,"enter_meta_title")),a(2),n("label","meta_description")("for","desc")("required",!1),a(),k("placeholder",l(16,45,"enter_meta_description")),a(2),n("label",l(18,47,"meta_image"))("for","meta_image")("required",!1),a(2),n("accept",E(55,x,i.mediaConfig.image))("multipleImage",!1)("image",i.brand==null?null:i.brand.brand_meta_image),a(),n("label","status")("for","status")("required",!1),a(5),n("id","brand_btn"),a(),F(" ",l(27,49,i.type=="create"?"save_brand":"update_brand")," "))},dependencies:[O,ie,Y,X,ee,te,re,ae,de,le,oe,P]});let r=e;return r})();var Be=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=c({type:e,selectors:[["app-create-brand"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(o,i){o&1&&(m(0,"app-page-wrapper",0),d(1,"app-form-brand",1),p()),o&2&&(n("title","create_brand"),a(),n("type","create"))},dependencies:[_,j]});let r=e;return r})();var Fe=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=c({type:e,selectors:[["app-edit-brand"]],decls:2,vars:2,consts:[[3,"title"],[3,"type"]],template:function(o,i){o&1&&(m(0,"app-page-wrapper",0),d(1,"app-form-brand",1),p()),o&2&&(n("title","edit_brand"),a(),n("type","edit"))},dependencies:[_,j]});let r=e;return r})();var Me=[{path:"",component:w,canActivate:[D],data:{permission:"brand.index"}},{path:"create",component:Be,canActivate:[D],data:{permission:["brand.index","brand.create"]}},{path:"edit/:id",component:Fe,canActivate:[D],data:{permission:["brand.index","brand.edit"]}}],we=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=T({type:e}),e.\u0275inj=I({imports:[q.forChild(Me),q]});let r=e;return r})();var ht=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=T({type:e}),e.\u0275inj=I({imports:[H,we,ce,K.forFeature([g])]});let r=e;return r})();export{ht as BrandModule};
